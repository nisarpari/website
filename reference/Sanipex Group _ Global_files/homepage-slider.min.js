require(["jquery","domReady!"],function($){$(function(){function loadGsap(onReady){require(["gsap","ScrollTrigger"],function(gsap,ScrollTrigger){gsap.gsap.registerPlugin(ScrollTrigger);onReady(gsap,ScrollTrigger);});}
let hasPaintedLCP=false;let currentIndex=0;const slides=$("#banner-carousel-new .item");const totalSlides=slides.length;let autoplayInterval;function showSlide(index){slides.removeClass("active").css("z-index",0);const $current=slides.eq(index);$current.addClass("active").css("z-index",1);if(!hasPaintedLCP&&index===0){const $img0=$current.find("img.banner-slider-image");if($img0.length){$img0.css({opacity:1,transform:"none"});}
const $text0=$current.find(".slider-text");if($text0.length){$text0.find("h2, .banner-subtitle, a.slider-details").css({opacity:1,transform:"none"});}
hasPaintedLCP=true;return;}
const $img=$current.find("img.banner-slider-image");const $text=$current.find(".slider-text");if(window.innerWidth>=1024){loadGsap(function(gsap){if($img.length){gsap.gsap.fromTo($img,{scale:1.05,opacity:1},{scale:1,opacity:1,duration:0.8,ease:"power3.out"});}
if($text.length){const tl=gsap.gsap.timeline({defaults:{ease:"power3.out",duration:0.8}});const $title=$text.find("h2");tl.fromTo($title,{opacity:0,y:20},{opacity:1,y:0},0.1).fromTo($text.find(".banner-subtitle"),{opacity:0,y:20},{opacity:1,y:0},">-0.4").fromTo($text.find("a.slider-details"),{opacity:0,y:15},{opacity:1,y:0},">-0.4");}});}}
function goToSlide(index){currentIndex=(index+totalSlides)%totalSlides;$(".thumb").removeClass("active");$('.thumb[data-slide="'+currentIndex+'"]').addClass("active");showSlide(currentIndex);if(hasPaintedLCP){$("#banner-carousel-new .item.lcp").removeClass("lcp");}
if(!hasPaintedLCP)return;if(autoplayInterval)clearInterval(autoplayInterval);autoplayInterval=setInterval(function(){goToSlide(currentIndex+1);},5000);}
function handleSwipe(start,end){if(end<start-50){goToSlide(currentIndex+1);}else if(end>start+50){goToSlide(currentIndex-1);}}
$(".thumb").on("click",function(){const idx=$(this).data("slide");goToSlide(idx);});$(".thumb").removeClass("active");$('.thumb[data-slide="0"]').addClass("active");showSlide(currentIndex);let touchStartX=0;$("#banner-carousel-new").on("touchstart",function(e){touchStartX=e.originalEvent.touches[0].clientX;}).on("touchend",function(e){const touchEndX=e.originalEvent.changedTouches[0].clientX;handleSwipe(touchStartX,touchEndX);});$("#banner-carousel-new").on("mouseenter",function(){clearInterval(autoplayInterval);}).on("mouseleave",function(){startAutoplay();});function startAutoplay(){if(autoplayInterval){clearInterval(autoplayInterval);}
autoplayInterval=setInterval(function(){goToSlide(currentIndex+1);},5000);}
setTimeout(function(){startAutoplay();},1500);function initParallaxAndThumbs(){if(window.innerWidth>=1470){loadGsap(function(gsap,ScrollTrigger){gsap.gsap.utils.toArray("#banner-carousel-new .item").forEach((slide)=>{const img=slide.querySelector("img.banner-slider-image");if(img){gsap.gsap.fromTo(img,{yPercent:-10,scale:1},{yPercent:0,scale:1,scrollTrigger:{trigger:slide,start:"top center",end:"bottom center",scrub:true}});}});gsap.gsap.fromTo(".custom-thumbnails .thumb",{opacity:0,scale:0.5},{opacity:1,scale:1,duration:1,stagger:0.2,ease:"back.out(1.7)",scrollTrigger:{trigger:".custom-thumbnails",start:"top bottom"}});});}else{$(".custom-thumbnails .thumb").css({opacity:1,transform:"none"});}}
if("requestIdleCallback"in window){requestIdleCallback(initParallaxAndThumbs);}else{setTimeout(initParallaxAndThumbs,800);}
if(window.innerWidth<1024){setTimeout(initParallaxAndThumbs,2500);}});});
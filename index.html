<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bella Bathwares - Luxury Sanitaryware</title>
    <link id="favicon" rel="icon" type="image/x-icon" href="favicon-light.ico">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwindcss.config = {
            theme: {
                extend: {
                    colors: {
                        'bella': {
                            50: '#faf9f7',
                            100: '#f5f3ef',
                            200: '#e8e4dd',
                            300: '#d4cec3',
                            400: '#b8ae9e',
                            500: '#9d8f7b',
                            600: '#8a7d6a',
                            700: '#726758',
                            800: '#5f564b',
                            900: '#504840',
                        },
                        'gold': {
                            light: '#d4af37',
                            DEFAULT: '#b8860b',
                            dark: '#996515',
                        },
                        'navy': {
                            light: '#2c3e50',
                            DEFAULT: '#1a252f',
                            dark: '#0d1318',
                        }
                    },
                    fontFamily: {
                        'display': ['Cormorant Garamond', 'serif'],
                        'body': ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Montserrat', sans-serif; background: #faf9f7; color: #1a252f; }
        html { scroll-behavior: smooth; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f5f3ef; }
        ::-webkit-scrollbar-thumb { background: #b8860b; border-radius: 4px; }

        /* Hide scrollbar for horizontal scroll areas on mobile */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        /* Mobile viewport height fix */
        @supports (height: 100svh) {
            .min-h-\[100svh\] { min-height: 100svh; }
        }

        .hero-gradient { background: linear-gradient(135deg, #1a252f 0%, #2c3e50 50%, #34495e 100%); }

        .category-card { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .category-card:hover { transform: translateY(-10px); box-shadow: 0 30px 60px -15px rgba(0,0,0,0.2); }
        .category-card:hover img { transform: scale(1.08); }
        .category-card img { transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1); }

        .product-card { transition: all 0.4s ease; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px -15px rgba(0,0,0,0.15); }

        .nav-dropdown { opacity: 0; visibility: hidden; transform: translateY(10px); transition: all 0.3s ease; }
        .nav-item:hover .nav-dropdown { opacity: 1; visibility: visible; transform: translateY(0); }

        .nav-link-anim { position: relative; transition: transform 0.2s ease; }
        .nav-link-anim::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background: #b8860b; transition: width 0.3s ease; }
        .nav-link-anim:hover::after { width: 100%; }

        /* Nav item hover lift effect for categories with dropdowns */
        .nav-item-hover { transition: transform 0.2s ease; }
        .nav-item-hover:hover { transform: translateY(-2px); }

        .page { display: none; animation: fadeIn 0.5s ease; }
        .page.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        .slide-up { animation: slideUp 0.8s ease forwards; }
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }

        .category-tree-item { transition: all 0.2s ease; }
        .category-tree-item:hover { color: #b8860b; padding-left: 4px; }

        .loader { width: 40px; height: 40px; border: 3px solid #e8e4dd; border-top-color: #b8860b; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .mobile-menu { transform: translateX(-100%); transition: transform 0.3s ease; }
        .mobile-menu.open { transform: translateX(0); }

        .subcategory-tile { position: relative; overflow: hidden; border-radius: 16px; }
        .subcategory-tile::before { content: ''; position: absolute; inset: 0; background: linear-gradient(180deg, transparent 50%, rgba(0,0,0,0.7) 100%); z-index: 1; }
        .subcategory-tile img { transition: transform 0.6s ease; }
        .subcategory-tile:hover img { transform: scale(1.1); }

        .thumbnail-item { border: 2px solid transparent; }
        .thumbnail-item.active { border-color: #b8860b; }

        .breadcrumb-item::after { content: '/'; margin: 0 8px; color: #9d8f7b; }
        .breadcrumb-item:last-child::after { display: none; }

        .ribbon-badge { position: absolute; top: 12px; left: 12px; z-index: 10; }

        /* Premium Collection Tiles */
        .collection-tile {
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            background: linear-gradient(145deg, #ffffff 0%, #f8f7f5 100%);
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .collection-tile:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15);
        }
        .collection-tile::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 40%, rgba(26, 37, 47, 0.85) 100%);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .collection-tile:hover::before {
            opacity: 1;
        }
        .collection-tile-img {
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1), filter 0.5s ease;
        }
        .collection-tile:hover .collection-tile-img {
            transform: scale(1.08);
        }
        .collection-tile-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 24px;
            z-index: 2;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .collection-tile:hover .collection-tile-content {
            transform: translateY(0);
            opacity: 1;
        }
        .collection-tile-static {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            z-index: 2;
            background: linear-gradient(180deg, transparent 0%, rgba(26, 37, 47, 0.7) 100%);
            transition: opacity 0.4s ease;
        }
        .collection-tile:hover .collection-tile-static {
            opacity: 0;
        }

        /* Featured collection large tile */
        .collection-featured {
            background: linear-gradient(135deg, #1a252f 0%, #2c3e50 100%);
        }
        .collection-featured::before {
            background: linear-gradient(180deg, transparent 20%, rgba(0,0,0,0.6) 100%);
            opacity: 1;
        }

        /* Stagger animations */
        .stagger-item { opacity: 0; transform: translateY(30px); }
        .stagger-item.visible { animation: staggerIn 0.6s ease forwards; }
        @keyframes staggerIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* Floating animation for product cards */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-float.delay-1 { animation-delay: 0.5s; }

        /* Gold accent line */
        .gold-accent { position: relative; }
        .gold-accent::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, #b8860b 0%, #d4af37 100%);
            border-radius: 2px;
        }

        /* =====================================================
           COMPREHENSIVE THEME SYSTEM
           ===================================================== */

        /* LIGHT MODE (Default) - Ensure proper contrast */
        body { background: #faf9f7; color: #1a252f; }

        /* Light mode dropdown menus - need proper contrast */
        .dropdown-menu { background: #ffffff; color: #1a252f; border: 1px solid #e8e4dd; }

        /* =====================================================
           DARK MODE STYLES
           ===================================================== */
        html.dark body { background: #0f1419; color: #e8e4dd; }

        /* Background colors */
        html.dark .bg-white { background: #1a252f !important; }
        html.dark .bg-white\/95 { background: rgba(26, 37, 47, 0.95) !important; }
        html.dark .bg-white\/20 { background: rgba(255, 255, 255, 0.1) !important; }
        html.dark .bg-bella-50 { background: #0f1419 !important; }
        html.dark .bg-bella-100 { background: #1a252f !important; }
        html.dark .bg-bella-200 { background: #2c3e50 !important; }

        /* Text colors - ensure visibility */
        html.dark .text-navy { color: #e8e4dd !important; }
        html.dark .text-navy-light { color: #d4cec3 !important; }
        html.dark .text-navy-dark { color: #f5f3ef !important; }
        html.dark .text-bella-400 { color: #9d8f7b !important; }
        html.dark .text-bella-500 { color: #b8ae9e !important; }
        html.dark .text-bella-600 { color: #d4cec3 !important; }
        html.dark .text-bella-700 { color: #e8e4dd !important; }

        /* Borders */
        html.dark .border-bella-100 { border-color: #2c3e50 !important; }
        html.dark .border-bella-200 { border-color: #34495e !important; }
        html.dark .border-navy-light { border-color: #34495e !important; }

        /* Shadows */
        html.dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0,0,0,0.5), 0 4px 6px -4px rgba(0,0,0,0.4) !important; }
        html.dark .shadow-sm { box-shadow: 0 1px 2px rgba(0,0,0,0.3) !important; }
        html.dark .shadow-md { box-shadow: 0 4px 6px rgba(0,0,0,0.4) !important; }
        html.dark .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0,0,0,0.5) !important; }

        /* Hover states */
        html.dark .hover\:bg-bella-50:hover { background: #1a252f !important; }
        html.dark .hover\:bg-bella-100:hover { background: #2c3e50 !important; }
        html.dark .hover\:bg-white\/10:hover { background: rgba(255, 255, 255, 0.15) !important; }

        /* Navigation */
        html.dark .nav-dropdown { background: #1a252f; border: 1px solid #2c3e50; }
        html.dark .mobile-menu { background: #0f1419; }

        /* Forms */
        html.dark input, html.dark select, html.dark textarea {
            background: #1a252f;
            border-color: #2c3e50;
            color: #e8e4dd;
        }
        html.dark input::placeholder { color: #9d8f7b; }

        /* Cards & Components */
        html.dark .product-card { background: #1a252f; }
        html.dark .collection-tile { background: linear-gradient(145deg, #1a252f 0%, #0f1419 100%); }

        /* Scrollbar */
        html.dark ::-webkit-scrollbar-track { background: #1a252f; }
        html.dark ::-webkit-scrollbar-thumb { background: #b8860b; }

        /* Fix for gradient sections in dark mode */
        html.dark .bg-gradient-to-r.from-gold { background: linear-gradient(to right, #996515, #b8860b) !important; }

        /* CTA section buttons in dark mode - ensure contrast */
        html.dark .bg-white.text-navy { background: #ffffff !important; color: #1a252f !important; }
        html.dark .hover\:bg-bella-100:hover.text-navy { background: #f5f3ef !important; }

        /* RTL Support for Arabic */
        html[dir="rtl"] .nav-link-anim::after { left: auto; right: 0; }
        html[dir="rtl"] .gold-accent::after { left: auto; right: 0; }
        html[dir="rtl"] .breadcrumb-item::after { margin: 0 8px; }
    </style>
</head>
<body>
    <div id="app"></div>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useCallback } = React;

        // ============================================
        // ODOO CONFIGURATION - Using Proxy Server
        // ============================================
        const ODOO_CONFIG = {
            // Use production API for localhost testing, relative URL for Vercel
            baseUrl: (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1')
                ? 'https://web.bellastore.in'
                : '',
            useOdoo: true
        };

        // ============================================
        // HASH-BASED ROUTER
        // ============================================
        const parseHash = () => {
            const hash = window.location.hash.slice(1) || '/';
            const [path, queryString] = hash.split('?');
            const params = {};
            if (queryString) {
                queryString.split('&').forEach(pair => {
                    const [key, value] = pair.split('=');
                    params[key] = decodeURIComponent(value);
                });
            }

            if (path.startsWith('/shop/') && path.length > 6) {
                return { page: 'product', params: { slug: path.slice(6), ...params } };
            } else if (path === '/shop') {
                return { page: 'shop', params };
            } else if (path === '/about') {
                return { page: 'about', params };
            } else if (path === '/contact') {
                return { page: 'contact', params };
            } else if (path.startsWith('/category/')) {
                // Category landing page - /category/:categoryId
                const categoryId = path.slice(10);
                return { page: 'category', params: { categoryId, ...params } };
            } else if (path === '/cart') {
                return { page: 'cart', params };
            } else if (path === '/wishlist') {
                return { page: 'wishlist', params };
            } else if (path === '/') {
                return { page: 'home', params };
            }
            return { page: 'home', params };
        };

        const useRouter = () => {
            const [route, setRoute] = useState(parseHash());

            useEffect(() => {
                const handleHashChange = () => setRoute(parseHash());
                window.addEventListener('hashchange', handleHashChange);
                return () => window.removeEventListener('hashchange', handleHashChange);
            }, []);

            const navigate = useCallback((page, params = {}) => {
                let hash = '/';
                if (page === 'shop') {
                    hash = '/shop';
                    const queryParts = [];
                    if (params.categoryId) queryParts.push(`category=${params.categoryId}`);
                    if (params.search) queryParts.push(`search=${encodeURIComponent(params.search)}`);
                    if (queryParts.length > 0) hash += `?${queryParts.join('&')}`;
                } else if (page === 'product') {
                    hash = `/shop/${params.slug}`;
                } else if (page === 'about') {
                    hash = '/about';
                } else if (page === 'contact') {
                    hash = '/contact';
                } else if (page === 'category') {
                    // Category landing page
                    hash = `/category/${params.categoryId}`;
                } else if (page === 'cart') {
                    hash = '/cart';
                } else if (page === 'wishlist') {
                    hash = '/wishlist';
                } else if (page === 'home') {
                    hash = '/';
                }
                window.location.hash = hash;
            }, []);

            return { route, navigate };
        };

        // ============================================
        // CART & WISHLIST MANAGEMENT
        // ============================================
        const CartContext = React.createContext();
        const WishlistContext = React.createContext();

        const useCart = () => {
            const context = React.useContext(CartContext);
            if (!context) throw new Error('useCart must be used within CartProvider');
            return context;
        };

        const useWishlist = () => {
            const context = React.useContext(WishlistContext);
            if (!context) throw new Error('useWishlist must be used within WishlistProvider');
            return context;
        };

        const CartProvider = ({ children }) => {
            const [cart, setCart] = useState(() => {
                try {
                    const saved = localStorage.getItem('bella_cart');
                    return saved ? JSON.parse(saved) : [];
                } catch { return []; }
            });

            useEffect(() => {
                localStorage.setItem('bella_cart', JSON.stringify(cart));
            }, [cart]);

            const addToCart = useCallback((product, quantity = 1) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) {
                        return prev.map(item =>
                            item.id === product.id
                                ? { ...item, quantity: item.quantity + quantity }
                                : item
                        );
                    }
                    return [...prev, { ...product, quantity }];
                });
            }, []);

            const removeFromCart = useCallback((productId) => {
                setCart(prev => prev.filter(item => item.id !== productId));
            }, []);

            const updateQuantity = useCallback((productId, quantity) => {
                if (quantity <= 0) {
                    setCart(prev => prev.filter(item => item.id !== productId));
                } else {
                    setCart(prev => prev.map(item =>
                        item.id === productId ? { ...item, quantity } : item
                    ));
                }
            }, []);

            const clearCart = useCallback(() => setCart([]), []);

            const cartCount = useMemo(() => cart.reduce((sum, item) => sum + item.quantity, 0), [cart]);
            const cartTotal = useMemo(() => cart.reduce((sum, item) => sum + (item.price * item.quantity), 0), [cart]);

            const value = useMemo(() => ({
                cart, addToCart, removeFromCart, updateQuantity, clearCart, cartCount, cartTotal
            }), [cart, addToCart, removeFromCart, updateQuantity, clearCart, cartCount, cartTotal]);

            return (
                <CartContext.Provider value={value}>
                    {children}
                </CartContext.Provider>
            );
        };

        const WishlistProvider = ({ children }) => {
            const [wishlist, setWishlist] = useState(() => {
                try {
                    const saved = localStorage.getItem('bella_wishlist');
                    return saved ? JSON.parse(saved) : [];
                } catch { return []; }
            });

            useEffect(() => {
                localStorage.setItem('bella_wishlist', JSON.stringify(wishlist));
            }, [wishlist]);

            const addToWishlist = useCallback((product) => {
                setWishlist(prev => {
                    if (prev.find(item => item.id === product.id)) return prev;
                    return [...prev, product];
                });
            }, []);

            const removeFromWishlist = useCallback((productId) => {
                setWishlist(prev => prev.filter(item => item.id !== productId));
            }, []);

            const toggleWishlist = useCallback((product) => {
                setWishlist(prev => {
                    const exists = prev.some(item => item.id === product.id);
                    if (exists) {
                        return prev.filter(item => item.id !== product.id);
                    }
                    return [...prev, product];
                });
            }, []);

            const isInWishlist = useCallback((productId) => wishlist.some(item => item.id === productId), [wishlist]);

            const wishlistCount = useMemo(() => wishlist.length, [wishlist]);

            const value = useMemo(() => ({
                wishlist, addToWishlist, removeFromWishlist, toggleWishlist, isInWishlist, wishlistCount
            }), [wishlist, addToWishlist, removeFromWishlist, toggleWishlist, isInWishlist, wishlistCount]);

            return (
                <WishlistContext.Provider value={value}>
                    {children}
                </WishlistContext.Provider>
            );
        };

        // ============================================
        // THEME CONTEXT (Dark/Light Mode)
        // ============================================
        const ThemeContext = React.createContext();

        const useTheme = () => {
            const context = React.useContext(ThemeContext);
            if (!context) throw new Error('useTheme must be used within ThemeProvider');
            return context;
        };

        const ThemeProvider = ({ children }) => {
            const [isDark, setIsDark] = useState(() => {
                const saved = localStorage.getItem('bella_theme');
                if (saved) return saved === 'dark';
                return window.matchMedia('(prefers-color-scheme: dark)').matches;
            });

            useEffect(() => {
                localStorage.setItem('bella_theme', isDark ? 'dark' : 'light');
                document.documentElement.classList.toggle('dark', isDark);
                // Switch favicon based on theme
                const favicon = document.getElementById('favicon');
                if (favicon) {
                    favicon.href = isDark ? 'favicon-dark.ico' : 'favicon-light.ico';
                }
            }, [isDark]);

            const toggleTheme = () => setIsDark(prev => !prev);

            return (
                <ThemeContext.Provider value={{ isDark, toggleTheme }}>
                    {children}
                </ThemeContext.Provider>
            );
        };

        // ============================================
        // LOCALE CONTEXT (Language & Country)
        // ============================================
        const LocaleContext = React.createContext();

        const useLocale = () => {
            const context = React.useContext(LocaleContext);
            if (!context) throw new Error('useLocale must be used within LocaleProvider');
            return context;
        };

        // Translations
        const translations = {
            en: {
                // Navigation
                home: 'Home',
                shop: 'Shop',
                about: 'About',
                contact: 'Contact',
                cart: 'Cart',
                wishlist: 'Wishlist',
                // Top Bar
                freeDelivery: 'Free Delivery on Orders Above',
                trackOrder: 'Track Order',
                support: 'Support',
                // Hero
                heroTitle1: 'Luxury Bathroom',
                heroTitle2: 'Solutions',
                heroSubtitle: 'Premium Italian-designed sanitaryware. Jacuzzis, faucets, basins & more.',
                shopNow: 'Shop Now',
                contactUs: 'Contact Us',
                // Stats
                customers: 'Customers',
                products: 'Products',
                countries: 'Countries',
                years: 'Years',
                // Trust
                genuineProducts: 'Genuine Products',
                fastDelivery: 'Fast Delivery',
                warranty: '2 Year Warranty',
                expertSupport: 'Expert Support',
                // Why Bella
                whyBella: 'Why Bella Bathwares?',
                whyBellaSubtitle: 'We bring together Italian design excellence with affordable luxury for your home.',
                premiumQuality: 'Premium Quality',
                premiumQualityDesc: 'Italian-designed sanitaryware crafted to perfection',
                expertInstallation: 'Expert Installation',
                expertInstallationDesc: 'Professional installation support across the region',
                warrantySupport: 'Warranty Support',
                warrantySupportDesc: 'Comprehensive 2-year warranty on all products',
                // Categories
                collections: 'Collections',
                shopByCategory: 'Shop by Category',
                exploreCollections: 'Explore our premium bathroom collections',
                viewAll: 'View All',
                viewAllProducts: 'View All Products',
                allProducts: 'All Products',
                categories: 'Categories',
                // Product
                addToCart: 'Add to Cart',
                addedToCart: 'Added to Cart!',
                quantity: 'Quantity',
                inStock: 'In Stock',
                outOfStock: 'Out of Stock',
                sku: 'SKU',
                description: 'Description',
                searchProducts: 'Search products...',
                featured: 'Featured',
                nameAZ: 'Name (A-Z)',
                priceLowHigh: 'Price: Low to High',
                priceHighLow: 'Price: High to Low',
                priceRange: 'Price Range',
                noProductsFound: 'No products found.',
                clearFilters: 'Clear filters',
                productsFound: 'products found',
                // Footer
                servingIn: 'Serving customers in',
                quickLinks: 'Quick Links',
                customerService: 'Customer Service',
                stayConnected: 'Stay Connected',
                subscribeNewsletter: 'Subscribe to our newsletter for exclusive offers',
                enterEmail: 'Enter your email',
                subscribe: 'Subscribe',
                privacyPolicy: 'Privacy Policy',
                termsConditions: 'Terms & Conditions',
                shippingInfo: 'Shipping Info',
                returns: 'Returns',
                faq: 'FAQ',
                allRightsReserved: 'All rights reserved',
                // Common
                ourStory: 'Our Story',
                learnMore: 'Learn More',
                browseProducts: 'Browse Products',
                findShowroom: 'Find Showroom',
                readyTransform: 'Ready to Transform Your Space?',
                browseCollection: 'Browse our collection or visit a showroom near you.',
                currency: 'OMR',
                loading: 'Loading...',
                error: 'Error',
                backToHome: 'Back to Home',
                productsCount: 'Products',
                subcategoriesCount: 'subcategories'
            },
            ar: {
                // Navigation
                home: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                shop: 'Ø§Ù„Ù…ØªØ¬Ø±',
                about: 'Ù…Ù† Ù†Ø­Ù†',
                contact: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§',
                cart: 'Ø§Ù„Ø³Ù„Ø©',
                wishlist: 'Ø§Ù„Ù…ÙØ¶Ù„Ø©',
                // Top Bar
                freeDelivery: 'ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚',
                trackOrder: 'ØªØªØ¨Ø¹ Ø§Ù„Ø·Ù„Ø¨',
                support: 'Ø§Ù„Ø¯Ø¹Ù…',
                // Hero
                heroTitle1: 'Ø­Ù„ÙˆÙ„ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª',
                heroTitle2: 'Ø§Ù„ÙØ§Ø®Ø±Ø©',
                heroSubtitle: 'Ø£Ø¯ÙˆØ§Øª ØµØ­ÙŠØ© Ø¥ÙŠØ·Ø§Ù„ÙŠØ© Ø§Ù„ØªØµÙ…ÙŠÙ…. Ø¬Ø§ÙƒÙˆØ²ÙŠØŒ ØµÙ†Ø§Ø¨ÙŠØ±ØŒ Ø£Ø­ÙˆØ§Ø¶ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯.',
                shopNow: 'ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†',
                contactUs: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§',
                // Stats
                customers: 'Ø¹Ù…Ù„Ø§Ø¡',
                products: 'Ù…Ù†ØªØ¬Ø§Øª',
                countries: 'Ø¯ÙˆÙ„',
                years: 'Ø³Ù†ÙˆØ§Øª',
                // Trust
                genuineProducts: 'Ù…Ù†ØªØ¬Ø§Øª Ø£ØµÙ„ÙŠØ©',
                fastDelivery: 'ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹',
                warranty: 'Ø¶Ù…Ø§Ù† Ø³Ù†ØªÙŠÙ†',
                expertSupport: 'Ø¯Ø¹Ù… Ù…ØªØ®ØµØµ',
                // Why Bella
                whyBella: 'Ù„Ù…Ø§Ø°Ø§ Ø¨ÙŠÙ„Ø§ Ø¨Ø§Ø«ÙˆÙŠØ±Ø²ØŸ',
                whyBellaSubtitle: 'Ù†Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø¥ÙŠØ·Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ÙØ®Ø§Ù…Ø© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ø¹Ù‚ÙˆÙ„Ø© Ù„Ù…Ù†Ø²Ù„Ùƒ.',
                premiumQuality: 'Ø¬ÙˆØ¯Ø© Ù…Ù…ØªØ§Ø²Ø©',
                premiumQualityDesc: 'Ø£Ø¯ÙˆØ§Øª ØµØ­ÙŠØ© Ø¥ÙŠØ·Ø§Ù„ÙŠØ© Ø§Ù„ØªØµÙ…ÙŠÙ… Ù…ØµÙ†ÙˆØ¹Ø© Ø¨Ø¥ØªÙ‚Ø§Ù†',
                expertInstallation: 'ØªØ±ÙƒÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠ',
                expertInstallationDesc: 'Ø¯Ø¹Ù… ØªØ±ÙƒÙŠØ¨ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©',
                warrantySupport: 'Ø¯Ø¹Ù… Ø§Ù„Ø¶Ù…Ø§Ù†',
                warrantySupportDesc: 'Ø¶Ù…Ø§Ù† Ø´Ø§Ù…Ù„ Ù„Ù…Ø¯Ø© Ø³Ù†ØªÙŠÙ† Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                // Categories
                collections: 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª',
                shopByCategory: 'ØªØ³ÙˆÙ‚ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©',
                exploreCollections: 'Ø§Ø³ØªÙƒØ´Ù Ù…Ø¬Ù…ÙˆØ¹Ø§ØªÙ†Ø§ Ø§Ù„ÙØ§Ø®Ø±Ø© Ù„Ù„Ø­Ù…Ø§Ù…Ø§Øª',
                viewAll: 'Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„',
                viewAllProducts: 'Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                allProducts: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                categories: 'Ø§Ù„ÙØ¦Ø§Øª',
                // Product
                addToCart: 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©',
                addedToCart: 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!',
                quantity: 'Ø§Ù„ÙƒÙ…ÙŠØ©',
                inStock: 'Ù…ØªÙˆÙØ±',
                outOfStock: 'ØºÙŠØ± Ù…ØªÙˆÙØ±',
                sku: 'Ø±Ù…Ø² Ø§Ù„Ù…Ù†ØªØ¬',
                description: 'Ø§Ù„ÙˆØµÙ',
                searchProducts: 'Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬Ø§Øª...',
                featured: 'Ù…Ù…ÙŠØ²',
                nameAZ: 'Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)',
                priceLowHigh: 'Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰',
                priceHighLow: 'Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„',
                priceRange: 'Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³Ø¹Ø±',
                noProductsFound: 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ù†ØªØ¬Ø§Øª.',
                clearFilters: 'Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±',
                productsFound: 'Ù…Ù†ØªØ¬Ø§Øª',
                // Footer
                servingIn: 'Ù†Ø®Ø¯Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ',
                quickLinks: 'Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©',
                customerService: 'Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',
                stayConnected: 'Ø§Ø¨Ù‚ÙŽ Ø¹Ù„Ù‰ ØªÙˆØ§ØµÙ„',
                subscribeNewsletter: 'Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ù†Ø´Ø±ØªÙ†Ø§ Ø§Ù„Ø¥Ø®Ø¨Ø§Ø±ÙŠØ© Ù„Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­ØµØ±ÙŠØ©',
                enterEmail: 'Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                subscribe: 'Ø§Ø´ØªØ±Ùƒ',
                privacyPolicy: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©',
                termsConditions: 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…',
                shippingInfo: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù†',
                returns: 'Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹',
                faq: 'Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©',
                allRightsReserved: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©',
                // Common
                ourStory: 'Ù‚ØµØªÙ†Ø§',
                learnMore: 'Ø§Ø¹Ø±Ù Ø§Ù„Ù…Ø²ÙŠØ¯',
                browseProducts: 'ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
                findShowroom: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¹Ø±Ø¶',
                readyTransform: 'Ù…Ø³ØªØ¹Ø¯ Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ø³Ø§Ø­ØªÙƒØŸ',
                browseCollection: 'ØªØµÙØ­ Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø£Ùˆ Ù‚Ù… Ø¨Ø²ÙŠØ§Ø±Ø© Ø£Ø­Ø¯ Ù…Ø¹Ø§Ø±Ø¶Ù†Ø§.',
                currency: 'Ø±.Ø¹',
                loading: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...',
                error: 'Ø®Ø·Ø£',
                backToHome: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                productsCount: 'Ù…Ù†ØªØ¬',
                subcategoriesCount: 'ÙØ¦Ø§Øª ÙØ±Ø¹ÙŠØ©'
            },
            es: {
                // Navigation
                home: 'Inicio',
                shop: 'Tienda',
                about: 'Nosotros',
                contact: 'Contacto',
                cart: 'Carrito',
                wishlist: 'Favoritos',
                // Top Bar
                freeDelivery: 'EnvÃ­o gratis en pedidos superiores a',
                trackOrder: 'Seguir Pedido',
                support: 'Soporte',
                // Hero
                heroTitle1: 'Soluciones de BaÃ±o',
                heroTitle2: 'de Lujo',
                heroSubtitle: 'Sanitarios de diseÃ±o italiano. Jacuzzis, grifos, lavabos y mÃ¡s.',
                shopNow: 'Comprar Ahora',
                contactUs: 'ContÃ¡ctenos',
                // Stats
                customers: 'Clientes',
                products: 'Productos',
                countries: 'PaÃ­ses',
                years: 'AÃ±os',
                // Trust
                genuineProducts: 'Productos Genuinos',
                fastDelivery: 'Entrega RÃ¡pida',
                warranty: '2 AÃ±os de GarantÃ­a',
                expertSupport: 'Soporte Experto',
                // Why Bella
                whyBella: 'Â¿Por quÃ© Bella Bathwares?',
                whyBellaSubtitle: 'Combinamos la excelencia del diseÃ±o italiano con el lujo accesible para tu hogar.',
                premiumQuality: 'Calidad Premium',
                premiumQualityDesc: 'Sanitarios de diseÃ±o italiano fabricados a la perfecciÃ³n',
                expertInstallation: 'InstalaciÃ³n Experta',
                expertInstallationDesc: 'Soporte de instalaciÃ³n profesional en toda la regiÃ³n',
                warrantySupport: 'Soporte de GarantÃ­a',
                warrantySupportDesc: 'GarantÃ­a completa de 2 aÃ±os en todos los productos',
                // Categories
                collections: 'Colecciones',
                shopByCategory: 'Comprar por CategorÃ­a',
                exploreCollections: 'Explora nuestras colecciones premium de baÃ±o',
                viewAll: 'Ver Todo',
                viewAllProducts: 'Ver Todos los Productos',
                allProducts: 'Todos los Productos',
                categories: 'CategorÃ­as',
                // Product
                addToCart: 'AÃ±adir al Carrito',
                addedToCart: 'Â¡AÃ±adido!',
                quantity: 'Cantidad',
                inStock: 'En Stock',
                outOfStock: 'Agotado',
                sku: 'SKU',
                description: 'DescripciÃ³n',
                searchProducts: 'Buscar productos...',
                featured: 'Destacado',
                nameAZ: 'Nombre (A-Z)',
                priceLowHigh: 'Precio: Menor a Mayor',
                priceHighLow: 'Precio: Mayor a Menor',
                priceRange: 'Rango de Precio',
                noProductsFound: 'No se encontraron productos.',
                clearFilters: 'Limpiar filtros',
                productsFound: 'productos encontrados',
                // Footer
                servingIn: 'Sirviendo a clientes en',
                quickLinks: 'Enlaces RÃ¡pidos',
                customerService: 'Servicio al Cliente',
                stayConnected: 'Mantente Conectado',
                subscribeNewsletter: 'SuscrÃ­bete a nuestro boletÃ­n para ofertas exclusivas',
                enterEmail: 'Ingresa tu email',
                subscribe: 'Suscribirse',
                privacyPolicy: 'PolÃ­tica de Privacidad',
                termsConditions: 'TÃ©rminos y Condiciones',
                shippingInfo: 'Info de EnvÃ­o',
                returns: 'Devoluciones',
                faq: 'FAQ',
                allRightsReserved: 'Todos los derechos reservados',
                // Common
                ourStory: 'Nuestra Historia',
                learnMore: 'Saber MÃ¡s',
                browseProducts: 'Ver Productos',
                findShowroom: 'Encontrar Tienda',
                readyTransform: 'Â¿Listo para Transformar tu Espacio?',
                browseCollection: 'Explora nuestra colecciÃ³n o visita una tienda.',
                currency: 'OMR',
                loading: 'Cargando...',
                error: 'Error',
                backToHome: 'Volver al Inicio',
                productsCount: 'productos',
                subcategoriesCount: 'subcategorÃ­as'
            }
        };

        // Country configurations with price multipliers
        // Base price is in OMR (Oman Rial), multipliers convert to local currency
        const countryConfigs = {
            OM: { name: 'Oman', flag: 'ðŸ‡´ðŸ‡²', currency: 'OMR', currencySymbol: 'Ø±.Ø¹', priceMultiplier: 1, freeDeliveryThreshold: 50 },
            AE: { name: 'UAE', flag: 'ðŸ‡¦ðŸ‡ª', currency: 'AED', currencySymbol: 'Ø¯.Ø¥', priceMultiplier: 10, freeDeliveryThreshold: 500 },
            QA: { name: 'Qatar', flag: 'ðŸ‡¶ðŸ‡¦', currency: 'QAR', currencySymbol: 'Ø±.Ù‚', priceMultiplier: 12, freeDeliveryThreshold: 600 },
            IN: { name: 'India', flag: 'ðŸ‡®ðŸ‡³', currency: 'INR', currencySymbol: 'â‚¹', priceMultiplier: 250, freeDeliveryThreshold: 12500 }
        };

        // Helper function to format price based on country
        const formatPrice = (basePrice, countryConfig) => {
            const convertedPrice = basePrice * countryConfig.priceMultiplier;
            // Round to 2 decimal places for OMR, whole numbers for others
            if (countryConfig.currency === 'OMR') {
                return convertedPrice.toFixed(3);
            }
            return Math.round(convertedPrice).toLocaleString();
        };

        const LocaleProvider = ({ children }) => {
            const [language, setLanguage] = useState(() => {
                return localStorage.getItem('bella_language') || 'en';
            });

            const [country, setCountry] = useState(() => {
                return localStorage.getItem('bella_country') || 'OM';
            });

            useEffect(() => {
                localStorage.setItem('bella_language', language);
                document.documentElement.dir = language === 'ar' ? 'rtl' : 'ltr';
                document.documentElement.lang = language;
            }, [language]);

            useEffect(() => {
                localStorage.setItem('bella_country', country);
            }, [country]);

            const t = (key) => translations[language]?.[key] || translations.en[key] || key;
            const countryConfig = countryConfigs[country];

            // Price formatter bound to current country
            const fp = (basePrice) => formatPrice(basePrice, countryConfig);

            return (
                <LocaleContext.Provider value={{ language, setLanguage, country, setCountry, t, countryConfig, countryConfigs, formatPrice: fp }}>
                    {children}
                </LocaleContext.Provider>
            );
        };

        // ============================================
        // ODOO API SERVICE
        // ============================================
        const OdooAPI = {
            async fetchProducts(filters = {}) {
                if (!ODOO_CONFIG.useOdoo) return MOCK_PRODUCTS;
                try {
                    const params = new URLSearchParams();
                    if (filters.category) params.append('category', filters.category);
                    if (filters.minPrice) params.append('minPrice', filters.minPrice);
                    if (filters.maxPrice) params.append('maxPrice', filters.maxPrice);
                    if (filters.search) params.append('q', filters.search);

                    const url = filters.category || filters.minPrice || filters.maxPrice || filters.search
                        ? `${ODOO_CONFIG.baseUrl}/api/search?${params.toString()}`
                        : `${ODOO_CONFIG.baseUrl}/api/products`;

                    const response = await fetch(url);
                    const products = await response.json();
                    if (products.error) throw new Error(products.error);
                    return products;
                } catch (error) {
                    console.error('Failed to fetch products:', error);
                    return MOCK_PRODUCTS;
                }
            },

            async fetchPublicCategories() {
                if (!ODOO_CONFIG.useOdoo) return MOCK_CATEGORIES;
                try {
                    const response = await fetch(`${ODOO_CONFIG.baseUrl}/api/public-categories`);
                    const categories = await response.json();
                    if (categories.error) throw new Error(categories.error);
                    return categories;
                } catch (error) {
                    console.error('Failed to fetch public categories:', error);
                    return MOCK_CATEGORIES;
                }
            },

            async fetchProductsByPublicCategory(categoryId) {
                if (!ODOO_CONFIG.useOdoo) {
                    // Filter mock products by categoryId, also include products from child categories
                    const catId = parseInt(categoryId);
                    const category = MOCK_CATEGORIES.find(c => c.id === catId);
                    const childIds = category?.childIds || [];
                    const allCategoryIds = [catId, ...childIds];
                    const filtered = MOCK_PRODUCTS.filter(p => allCategoryIds.includes(p.categoryId));
                    return filtered.length > 0 ? filtered : MOCK_PRODUCTS.slice(0, 6);
                }
                try {
                    const response = await fetch(`${ODOO_CONFIG.baseUrl}/api/products/public-category/${categoryId}`);
                    const products = await response.json();
                    if (products.error) throw new Error(products.error);
                    return products;
                } catch (error) {
                    console.error('Failed to fetch products by category:', error);
                    return [];
                }
            },

            async fetchProductBySlug(slug) {
                if (!ODOO_CONFIG.useOdoo) {
                    const id = parseInt(slug.match(/-(\d+)$/)?.[1]);
                    return MOCK_PRODUCTS.find(p => p.id === id) || null;
                }
                try {
                    const response = await fetch(`${ODOO_CONFIG.baseUrl}/api/product/by-slug/${slug}`);
                    const product = await response.json();
                    if (product.error) throw new Error(product.error);
                    return product;
                } catch (error) {
                    console.error('Failed to fetch product:', error);
                    return null;
                }
            },

            async fetchRibbons() {
                if (!ODOO_CONFIG.useOdoo) return [];
                try {
                    const response = await fetch(`${ODOO_CONFIG.baseUrl}/api/ribbons`);
                    return await response.json();
                } catch (error) {
                    console.error('Failed to fetch ribbons:', error);
                    return [];
                }
            }
        };

        // ============================================
        // MOCK DATA (Fallback)
        // ============================================
        const MOCK_CATEGORIES = [
            // Root categories
            { id: 1, name: 'Collections', slug: 'collections', totalCount: 150, childIds: [10, 11, 12], parentId: null },
            { id: 2, name: 'Bathroom', slug: 'bathroom', totalCount: 200, childIds: [20, 21, 22, 23], parentId: null },
            { id: 3, name: 'Bath Essentials', slug: 'bath-essentials', totalCount: 120, childIds: [30, 31, 32], parentId: null },
            { id: 4, name: 'Washroom', slug: 'washroom', totalCount: 100, childIds: [40, 41, 42], parentId: null },
            { id: 5, name: 'Washlet', slug: 'washlet', totalCount: 60, childIds: [50, 51], parentId: null },
            { id: 6, name: 'Wellness', slug: 'wellness', totalCount: 80, childIds: [60, 61, 62], parentId: null },
            // Collections children
            { id: 10, name: 'Premium Series', slug: 'premium-series', totalCount: 50, childIds: [], parentId: 1 },
            { id: 11, name: 'Classic Collection', slug: 'classic-collection', totalCount: 50, childIds: [], parentId: 1 },
            { id: 12, name: 'Modern Line', slug: 'modern-line', totalCount: 50, childIds: [], parentId: 1 },
            // Bathroom children
            { id: 20, name: 'Basin Mixers', slug: 'basin-mixers', totalCount: 60, childIds: [], parentId: 2 },
            { id: 21, name: 'Shower Systems', slug: 'shower-systems', totalCount: 50, childIds: [], parentId: 2 },
            { id: 22, name: 'Bathtubs', slug: 'bathtubs', totalCount: 40, childIds: [], parentId: 2 },
            { id: 23, name: 'Bathroom Accessories', slug: 'bathroom-accessories', totalCount: 50, childIds: [], parentId: 2 },
            // Bath Essentials children
            { id: 30, name: 'Faucets', slug: 'faucets', totalCount: 40, childIds: [], parentId: 3 },
            { id: 31, name: 'Showers', slug: 'showers', totalCount: 40, childIds: [], parentId: 3 },
            { id: 32, name: 'Drains', slug: 'drains', totalCount: 40, childIds: [], parentId: 3 },
            // Washroom children
            { id: 40, name: 'Toilets', slug: 'toilets', totalCount: 35, childIds: [], parentId: 4 },
            { id: 41, name: 'Urinals', slug: 'urinals', totalCount: 30, childIds: [], parentId: 4 },
            { id: 42, name: 'Basins', slug: 'basins', totalCount: 35, childIds: [], parentId: 4 },
            // Washlet children
            { id: 50, name: 'Smart Toilets', slug: 'smart-toilets', totalCount: 30, childIds: [], parentId: 5 },
            { id: 51, name: 'Bidet Seats', slug: 'bidet-seats', totalCount: 30, childIds: [], parentId: 5 },
            // Wellness children
            { id: 60, name: 'Jacuzzi', slug: 'jacuzzi', totalCount: 30, childIds: [], parentId: 6 },
            { id: 61, name: 'Steam Rooms', slug: 'steam-rooms', totalCount: 25, childIds: [], parentId: 6 },
            { id: 62, name: 'Spa Equipment', slug: 'spa-equipment', totalCount: 25, childIds: [], parentId: 6 },
        ];

        const MOCK_PRODUCTS = [
            // Basin Mixers (categoryId: 20)
            { id: 1, name: 'Premium Basin Mixer Chrome', price: 299, category: 'Basin Mixers', categoryId: 20, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'premium-basin-mixer-chrome-1', inStock: true },
            { id: 2, name: 'Luxury Gold Basin Mixer', price: 449, category: 'Basin Mixers', categoryId: 20, image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&q=80', slug: 'luxury-gold-basin-mixer-2', inStock: true },
            { id: 3, name: 'Modern Matte Black Mixer', price: 389, category: 'Basin Mixers', categoryId: 20, image: 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&q=80', slug: 'modern-matte-black-mixer-3', inStock: true },
            // Shower Systems (categoryId: 21)
            { id: 4, name: 'Rainfall Shower System', price: 599, category: 'Shower Systems', categoryId: 21, image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&q=80', slug: 'rainfall-shower-system-4', inStock: true },
            { id: 5, name: 'Thermostatic Shower Set', price: 749, category: 'Shower Systems', categoryId: 21, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'thermostatic-shower-set-5', inStock: true },
            // Bathtubs (categoryId: 22)
            { id: 6, name: 'Freestanding Acrylic Bathtub', price: 1299, category: 'Bathtubs', categoryId: 22, image: 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&q=80', slug: 'freestanding-acrylic-bathtub-6', inStock: true },
            { id: 7, name: 'Corner Jacuzzi Tub', price: 2499, category: 'Bathtubs', categoryId: 22, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'corner-jacuzzi-tub-7', inStock: true },
            // Faucets (categoryId: 30)
            { id: 8, name: 'Classic Chrome Faucet', price: 199, category: 'Faucets', categoryId: 30, image: 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&q=80', slug: 'classic-chrome-faucet-8', inStock: true },
            { id: 9, name: 'Waterfall Faucet Gold', price: 349, category: 'Faucets', categoryId: 30, image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&q=80', slug: 'waterfall-faucet-gold-9', inStock: true },
            // Showers (categoryId: 31)
            { id: 10, name: 'Handheld Shower Head', price: 89, category: 'Showers', categoryId: 31, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'handheld-shower-head-10', inStock: true },
            { id: 11, name: 'LED Rain Shower Head', price: 159, category: 'Showers', categoryId: 31, image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&q=80', slug: 'led-rain-shower-head-11', inStock: true },
            // Drains (categoryId: 32)
            { id: 12, name: 'Linear Floor Drain', price: 129, category: 'Drains', categoryId: 32, image: 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&q=80', slug: 'linear-floor-drain-12', inStock: true },
            { id: 13, name: 'Pop-Up Basin Drain', price: 49, category: 'Drains', categoryId: 32, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'pop-up-basin-drain-13', inStock: true },
            // Toilets (categoryId: 40)
            { id: 14, name: 'Wall Hung Toilet', price: 699, category: 'Toilets', categoryId: 40, image: 'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=600&q=80', slug: 'wall-hung-toilet-14', inStock: true },
            { id: 15, name: 'One-Piece Modern Toilet', price: 549, category: 'Toilets', categoryId: 40, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'one-piece-modern-toilet-15', inStock: true },
            // Basins (categoryId: 42)
            { id: 16, name: 'Vessel Sink Round', price: 249, category: 'Basins', categoryId: 42, image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&q=80', slug: 'vessel-sink-round-16', inStock: true },
            { id: 17, name: 'Undermount Basin', price: 299, category: 'Basins', categoryId: 42, image: 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&q=80', slug: 'undermount-basin-17', inStock: true },
            // Jacuzzi (categoryId: 60)
            { id: 18, name: 'Luxury Spa Jacuzzi', price: 4999, category: 'Jacuzzi', categoryId: 60, image: 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&q=80', slug: 'luxury-spa-jacuzzi-18', inStock: true },
            { id: 19, name: 'Outdoor Hot Tub', price: 3999, category: 'Jacuzzi', categoryId: 60, image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&q=80', slug: 'outdoor-hot-tub-19', inStock: true },
            // Smart Toilets (categoryId: 50)
            { id: 20, name: 'Smart Bidet Toilet', price: 1999, category: 'Smart Toilets', categoryId: 50, image: 'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=600&q=80', slug: 'smart-bidet-toilet-20', inStock: true },
        ];

        const COLORS = [
            { name: 'Chrome', hex: '#C0C0C0' },
            { name: 'Matte Black', hex: '#1a1a1a' },
            { name: 'Gold', hex: '#D4AF37' },
            { name: 'Rose Gold', hex: '#B76E79' },
            { name: 'Brushed Nickel', hex: '#8B8682' },
            { name: 'White', hex: '#FFFFFF' },
        ];

        // ============================================
        // NAVIGATION COMPONENT
        // ============================================
        const Navigation = ({ navigate, categories }) => {
            const [isScrolled, setIsScrolled] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            const [showLangMenu, setShowLangMenu] = useState(false);
            const [showCountryMenu, setShowCountryMenu] = useState(false);
            const [showSearch, setShowSearch] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [searchResults, setSearchResults] = useState([]);
            const [searchLoading, setSearchLoading] = useState(false);
            const searchInputRef = React.useRef(null);
            const searchContainerRef = React.useRef(null);
            const { cartCount } = useCart();
            const { wishlistCount } = useWishlist();
            const { isDark, toggleTheme } = useTheme();
            const { language, setLanguage, country, setCountry, t, countryConfig, countryConfigs, formatPrice } = useLocale();

            useEffect(() => {
                const handleScroll = () => setIsScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            // Close search when clicking outside
            useEffect(() => {
                const handleClickOutside = (e) => {
                    if (searchContainerRef.current && !searchContainerRef.current.contains(e.target)) {
                        setShowSearch(false);
                    }
                };
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            // Auto-search after 3 characters
            useEffect(() => {
                if (searchQuery.length >= 3) {
                    setSearchLoading(true);
                    const timer = setTimeout(async () => {
                        try {
                            const products = await OdooAPI.fetchProducts();
                            const query = searchQuery.toLowerCase();
                            const filtered = products.filter(p =>
                                p.name.toLowerCase().includes(query) ||
                                p.category?.toLowerCase().includes(query) ||
                                p.sku?.toLowerCase().includes(query)
                            ).slice(0, 6);
                            setSearchResults(filtered);
                        } catch (err) {
                            setSearchResults([]);
                        }
                        setSearchLoading(false);
                    }, 300);
                    return () => clearTimeout(timer);
                } else {
                    setSearchResults([]);
                }
            }, [searchQuery]);

            // Handle product click from search
            const handleSearchProductClick = (product) => {
                navigate('product', { slug: product.slug });
                setShowSearch(false);
                setSearchQuery('');
                setSearchResults([]);
            };

            // Handle view all results
            const handleViewAllResults = () => {
                navigate('shop', { search: searchQuery.trim() });
                setShowSearch(false);
                setSearchQuery('');
                setSearchResults([]);
            };

            // Get root categories for nav
            const rootCategories = categories.filter(c => c.parentId === null).slice(0, 6);

            // Navigate to category landing page (for parent categories) or shop (for leaf categories)
            const handleCategoryClick = (categoryId, hasChildren = false) => {
                if (hasChildren) {
                    // Go to category landing page showing subcategory tiles
                    navigate('category', { categoryId });
                } else {
                    // Go directly to shop filtered by this category
                    navigate('shop', { categoryId });
                }
                setMobileMenuOpen(false);
            };

            return (
                <>
                    {/* Top Bar */}
                    <div className="text-sm py-2" style={{ backgroundColor: '#0d1318', color: '#ffffff' }}>
                        <div className="max-w-7xl mx-auto px-4 md:px-6 flex justify-between items-center">
                            <span className="hidden sm:block" style={{ color: '#e8e4dd' }}>{t('freeDelivery')} {countryConfig.currencySymbol} {countryConfig.freeDeliveryThreshold.toLocaleString()}</span>
                            <div className="flex items-center gap-2 md:gap-4">
                                {/* Theme Toggle */}
                                <button
                                    onClick={toggleTheme}
                                    className="p-1.5 hover:bg-white/10 rounded-full transition-colors"
                                    style={{ color: '#ffffff' }}
                                    title={isDark ? 'Light Mode' : 'Dark Mode'}
                                >
                                    {isDark ? (
                                        <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
                                        </svg>
                                    ) : (
                                        <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                                        </svg>
                                    )}
                                </button>

                                {/* Language Selector */}
                                <div className="relative">
                                    <button
                                        onClick={() => { setShowLangMenu(!showLangMenu); setShowCountryMenu(false); }}
                                        className="flex items-center gap-1 px-2 py-1 hover:bg-white/10 rounded transition-colors text-xs md:text-sm"
                                        style={{ color: '#ffffff' }}
                                    >
                                        <span className="font-medium">{language.toUpperCase()}</span>
                                        <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                                        </svg>
                                    </button>
                                    {showLangMenu && (
                                        <div className="absolute top-full right-0 mt-1 rounded-lg shadow-xl py-1 min-w-[120px] z-[100]" style={{ backgroundColor: '#ffffff', border: '1px solid #e5e0d8' }}>
                                            {[
                                                { code: 'en', name: 'English', flag: 'ðŸ‡¬ðŸ‡§' },
                                                { code: 'ar', name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ðŸ‡¸ðŸ‡¦' },
                                                { code: 'es', name: 'EspaÃ±ol', flag: 'ðŸ‡ªðŸ‡¸' }
                                            ].map(lang => (
                                                <button
                                                    key={lang.code}
                                                    onClick={() => { setLanguage(lang.code); setShowLangMenu(false); }}
                                                    className="flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 transition-colors"
                                                    style={{ color: language === lang.code ? '#c9a962' : '#1a2332', backgroundColor: language === lang.code ? '#f5f3f0' : 'transparent' }}
                                                >
                                                    <span>{lang.flag}</span>
                                                    <span>{lang.name}</span>
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                {/* Country Selector */}
                                <div className="relative">
                                    <button
                                        onClick={() => { setShowCountryMenu(!showCountryMenu); setShowLangMenu(false); }}
                                        className="flex items-center gap-1 px-2 py-1 hover:bg-white/10 rounded transition-colors text-xs md:text-sm"
                                        style={{ color: '#ffffff' }}
                                    >
                                        <span className="text-base">{countryConfig.flag}</span>
                                        <span className="hidden md:inline">{countryConfig.name}</span>
                                        <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                                        </svg>
                                    </button>
                                    {showCountryMenu && (
                                        <div className="absolute top-full right-0 mt-1 rounded-lg shadow-xl py-1 min-w-[140px] z-[100]" style={{ backgroundColor: '#ffffff', border: '1px solid #e5e0d8' }}>
                                            {Object.entries(countryConfigs).map(([code, config]) => (
                                                <button
                                                    key={code}
                                                    onClick={() => { setCountry(code); setShowCountryMenu(false); }}
                                                    className="flex items-center gap-2 w-full text-left px-3 py-2 hover:bg-gray-100 transition-colors"
                                                    style={{ color: country === code ? '#c9a962' : '#1a2332', backgroundColor: country === code ? '#f5f3f0' : 'transparent' }}
                                                >
                                                    <span>{config.flag}</span>
                                                    <span style={{ color: country === code ? '#c9a962' : '#1a2332' }}>{config.name}</span>
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <div className="hidden md:flex gap-4 ml-2 border-l border-white/20 pl-4" style={{ color: '#e8e4dd' }}>
                                    <a href="#" className="hover:text-gold-light transition-colors">{t('trackOrder')}</a>
                                    <a href="#" className="hover:text-gold-light transition-colors">{t('support')}</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Navigation */}
                    <nav className={`sticky top-0 z-50 transition-all duration-300 ${isScrolled ? 'bg-white shadow-lg' : 'bg-white/95 backdrop-blur-md'}`}>
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="flex items-center justify-between h-20">
                                {/* Logo */}
                                <div
                                    className="cursor-pointer"
                                    onClick={() => navigate('home')}
                                >
                                    <img
                                        src="bella_logo.png"
                                        alt="Bella Bathwares"
                                        className="h-14 w-auto object-contain"
                                    />
                                </div>

                                {/* Desktop Navigation */}
                                <div className="hidden lg:flex items-center gap-1">
                                    <button onClick={() => navigate('home')} className="nav-link-anim px-4 py-2 text-sm font-medium text-navy-light hover:text-gold transition-colors">
                                        {t('home')}
                                    </button>
                                    <button onClick={() => navigate('shop')} className="nav-link-anim px-4 py-2 text-sm font-medium text-navy-light hover:text-gold transition-colors">
                                        {t('shop')}
                                    </button>

                                    {rootCategories.map(cat => {
                                        const hasChildren = cat.childIds?.length > 0;
                                        const childCategories = categories.filter(c => cat.childIds?.includes(c.id));

                                        return (
                                            <div key={cat.id} className={`nav-item relative group ${hasChildren ? 'nav-item-hover' : ''}`}>
                                                <button
                                                    onClick={() => handleCategoryClick(cat.id, hasChildren)}
                                                    className="nav-link-anim px-4 py-2 text-sm font-medium text-navy-light hover:text-gold transition-colors"
                                                >
                                                    {cat.name}
                                                </button>

                                                {/* Dropdown for subcategories */}
                                                {hasChildren && (
                                                    <div className="nav-dropdown absolute top-full left-0 bg-white shadow-xl rounded-lg py-4 min-w-[220px]">
                                                        {childCategories.map(sub => {
                                                            const subHasChildren = sub.childIds?.length > 0;
                                                            return (
                                                                <button
                                                                    key={sub.id}
                                                                    onClick={(e) => {
                                                                        e.stopPropagation();
                                                                        handleCategoryClick(sub.id, subHasChildren);
                                                                    }}
                                                                    className="block w-full text-left px-5 py-2 text-sm text-navy-light hover:bg-bella-50 hover:text-gold transition-colors"
                                                                >
                                                                    {sub.name}
                                                                </button>
                                                            );
                                                        })}
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Right Icons */}
                                <div className="flex items-center gap-3">
                                    {/* Search */}
                                    <div className="relative" ref={searchContainerRef}>
                                        <button onClick={() => { setShowSearch(!showSearch); setTimeout(() => searchInputRef.current?.focus(), 100); }} className="p-2 hover:bg-bella-100 rounded-full transition-colors">
                                            <svg className="w-5 h-5 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                            </svg>
                                        </button>

                                        {/* Search Dropdown */}
                                        {showSearch && (
                                            <div className="absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-2xl border border-bella-200 overflow-hidden z-50">
                                                <div className="p-3 border-b border-bella-100">
                                                    <input
                                                        ref={searchInputRef}
                                                        type="text"
                                                        value={searchQuery}
                                                        onChange={(e) => setSearchQuery(e.target.value)}
                                                        onKeyDown={(e) => e.key === 'Enter' && searchQuery.length >= 3 && handleViewAllResults()}
                                                        placeholder={t('searchProducts')}
                                                        className="w-full px-4 py-2 text-sm border border-bella-200 rounded-lg focus:outline-none focus:border-gold"
                                                        autoComplete="off"
                                                    />
                                                </div>

                                                {searchLoading && (
                                                    <div className="p-4 text-center text-gray-500 text-sm">Searching...</div>
                                                )}

                                                {!searchLoading && searchQuery.length >= 3 && searchResults.length === 0 && (
                                                    <div className="p-4 text-center text-gray-500 text-sm">No products found</div>
                                                )}

                                                {!searchLoading && searchResults.length > 0 && (
                                                    <div className="max-h-80 overflow-y-auto">
                                                        {searchResults.map(product => (
                                                            <div
                                                                key={product.id}
                                                                onClick={() => handleSearchProductClick(product)}
                                                                className="flex items-center gap-3 p-3 hover:bg-bella-50 cursor-pointer border-b border-bella-50 last:border-0"
                                                            >
                                                                <img src={product.thumbnail} alt={product.name} className="w-12 h-12 object-cover rounded-lg" />
                                                                <div className="flex-1 min-w-0">
                                                                    <p className="text-sm font-medium text-navy truncate">{product.name}</p>
                                                                    <p className="text-xs text-gold">{countryConfig.currencySymbol} {formatPrice(product.price)}</p>
                                                                </div>
                                                            </div>
                                                        ))}
                                                        <button
                                                            onClick={handleViewAllResults}
                                                            className="w-full p-3 text-sm text-center text-gold hover:bg-bella-50 font-medium"
                                                        >
                                                            View all results
                                                        </button>
                                                    </div>
                                                )}

                                                {searchQuery.length < 3 && searchQuery.length > 0 && (
                                                    <div className="p-4 text-center text-gray-400 text-sm">Type {3 - searchQuery.length} more character{3 - searchQuery.length > 1 ? 's' : ''}</div>
                                                )}
                                            </div>
                                        )}
                                    </div>

                                    {/* Wishlist */}
                                    <button onClick={() => navigate('wishlist')} className="p-2 hover:bg-bella-100 rounded-full transition-colors hidden sm:flex relative">
                                        <svg className={`w-5 h-5 ${wishlistCount > 0 ? 'text-red-500' : 'text-navy'}`} fill={wishlistCount > 0 ? 'currentColor' : 'none'} stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                        </svg>
                                        {wishlistCount > 0 && (
                                            <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center">{wishlistCount}</span>
                                        )}
                                    </button>

                                    {/* Cart */}
                                    <button onClick={() => navigate('cart')} className="p-2 hover:bg-bella-100 rounded-full transition-colors relative">
                                        <svg className="w-5 h-5 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                                        </svg>
                                        {cartCount > 0 && (
                                            <span className="absolute -top-1 -right-1 w-5 h-5 bg-gold text-white text-xs rounded-full flex items-center justify-center">{cartCount > 99 ? '99+' : cartCount}</span>
                                        )}
                                    </button>

                                    {/* Mobile Menu Button */}
                                    <button className="lg:hidden p-2" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                                        <svg className="w-6 h-6 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            {mobileMenuOpen ? (
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                            ) : (
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                                            )}
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </nav>

                    {/* Mobile Menu */}
                    <div className={`mobile-menu fixed inset-0 z-40 bg-white lg:hidden ${mobileMenuOpen ? 'open' : ''}`}>
                        <div className="p-6 pt-24 h-full overflow-y-auto">
                            <button onClick={() => { navigate('home'); setMobileMenuOpen(false); }} className="w-full text-left py-4 text-lg font-medium text-navy border-b border-bella-100">{t('home')}</button>
                            <button onClick={() => { navigate('shop'); setMobileMenuOpen(false); }} className="w-full text-left py-4 text-lg font-medium text-navy border-b border-bella-100">{t('shop')}</button>
                            {rootCategories.map(cat => {
                                const hasChildren = cat.childIds?.length > 0;
                                return (
                                    <button key={cat.id} onClick={() => handleCategoryClick(cat.id, hasChildren)} className="w-full text-left py-4 text-lg font-medium text-navy border-b border-bella-100">
                                        {cat.name}
                                    </button>
                                );
                            })}
                        </div>
                    </div>

                </>
            );
        };

        // ============================================
        // ACCORDION CATEGORIES COMPONENT
        // ============================================
        const AccordionCategories = ({ navigate, categories }) => {
            const [activeIndex, setActiveIndex] = useState(0);

            // Auto-expand categories every 10 seconds (works for touch devices)
            useEffect(() => {
                const accordionInterval = setInterval(() => {
                    setActiveIndex(prev => (prev + 1) % Math.min(categories.length, 4));
                }, 10000);
                return () => clearInterval(accordionInterval);
            }, [categories.length]);

            const categoryImages = [
                'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=800&q=80',
                'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=800&q=80',
                'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=800&q=80',
                'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=800&q=80'
            ];

            const accordionCategories = categories.map((cat, index) => ({
                ...cat,
                image: categoryImages[index] || categoryImages[0]
            }));

            return (
                <div className="flex flex-col lg:flex-row gap-2 lg:gap-3 h-auto lg:h-[500px]">
                    {accordionCategories.map((cat, index) => (
                        <div
                            key={cat.id}
                            className={`relative overflow-hidden rounded-2xl cursor-pointer transition-all duration-500 ease-in-out ${
                                activeIndex === index
                                    ? 'flex-[3] lg:flex-[4]'
                                    : 'flex-1 lg:flex-1'
                            }`}
                            style={{ minHeight: activeIndex === index ? '300px' : '100px' }}
                            onMouseEnter={() => setActiveIndex(index)}
                            onClick={() => navigate('shop', { categoryId: cat.id })}
                        >
                            {/* Background Image */}
                            <img
                                src={cat.image}
                                alt={cat.name}
                                className={`absolute inset-0 w-full h-full object-cover transition-transform duration-700 ${
                                    activeIndex === index ? 'scale-100' : 'scale-110'
                                }`}
                            />

                            {/* Overlay */}
                            <div className={`absolute inset-0 transition-all duration-500 ${
                                activeIndex === index
                                    ? 'bg-gradient-to-t from-black/70 via-black/20 to-transparent'
                                    : 'bg-black/40'
                            }`} />

                            {/* Content */}
                            <div className="absolute bottom-0 left-0 right-0 p-5 lg:p-6">
                                <h3 className={`font-display font-bold text-white transition-all duration-500 ${
                                    activeIndex === index
                                        ? 'text-2xl lg:text-3xl mb-3'
                                        : 'text-lg lg:text-xl'
                                }`}>
                                    {cat.name}
                                </h3>

                                {/* View All Button - Only visible on active */}
                                <div className={`transition-all duration-500 overflow-hidden ${
                                    activeIndex === index
                                        ? 'opacity-100 max-h-20 mt-2'
                                        : 'opacity-0 max-h-0'
                                }`}>
                                    <button className="bg-white text-navy font-semibold px-5 py-2.5 rounded-full text-sm hover:bg-gold hover:text-white transition-colors">
                                        View All
                                    </button>
                                </div>
                            </div>

                            {/* Product count badge - Only on active */}
                            <div className={`absolute top-4 right-4 transition-all duration-500 ${
                                activeIndex === index
                                    ? 'opacity-100 translate-y-0'
                                    : 'opacity-0 -translate-y-2'
                            }`}>
                                <span className="bg-white/20 backdrop-blur-sm text-white text-xs font-medium px-3 py-1.5 rounded-full">
                                    {cat.totalCount || cat.count || 0}+ Products
                                </span>
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        // ============================================
        // HOME PAGE - Mobile-First Design
        // ============================================
        const HomePage = ({ navigate, categories }) => {
            const { t } = useLocale();
            const rootCategories = categories.filter(c => c.parentId === null).slice(0, 6);
            const [activeHeroIndex, setActiveHeroIndex] = useState(0);
            const [reviewIndex, setReviewIndex] = useState(0);

            // Auto-shuffle hero images every 10 seconds
            useEffect(() => {
                const heroInterval = setInterval(() => {
                    setActiveHeroIndex(prev => (prev + 1) % 5);
                }, 10000);
                return () => clearInterval(heroInterval);
            }, []);

            // Hero slides data with high-quality bathroom images
            const heroSlides = [
                {
                    image: 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=1920&q=80',
                    title: 'Luxury Jacuzzi',
                    subtitle: 'Transform your bathroom into a spa retreat'
                },
                {
                    image: 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=1920&q=80',
                    title: 'Premium Faucets',
                    subtitle: 'Italian craftsmanship meets modern design'
                },
                {
                    image: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=1920&q=80',
                    title: 'Basin Mixers',
                    subtitle: 'Elegance in every detail'
                },
                {
                    image: 'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=1920&q=80',
                    title: 'Sanitary Ware',
                    subtitle: 'Complete bathroom solutions'
                },
                {
                    image: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1920&q=80',
                    title: 'Kitchen Collection',
                    subtitle: 'Transform your kitchen space'
                }
            ];

            // Customer reviews data
            const reviews = [
                {
                    text: "The well organized showroom offers a wide variety of outdoor living solutions, from luxurious furniture to high-quality outdoor & indoor kitchen appliances. Also the staff were knowledgeable and helpful.",
                    author: "Ahmed Al-Rashid",
                    location: "Muscat, Oman",
                    rating: 5
                },
                {
                    text: "I can't describe this company enough. First of all the range of products and specialties related to bathroom, gardens and kitchens are amazing and interesting. The team is very knowledgeable and professional. Their customer service support is excellent.",
                    author: "Priya Sharma",
                    location: "Mumbai, India",
                    rating: 5
                },
                {
                    text: "Premium sanitary products with top quality, amazing design. Thank you Bella for the best product and excellent customer service. Thanks to Ms Umida for her quality service. Highly recommend!",
                    author: "Mohammed Al-Farsi",
                    location: "Dubai, UAE",
                    rating: 5
                },
                {
                    text: "Excellent quality products and outstanding service. The showroom staff helped us choose the perfect fixtures for our new villa. Delivery was prompt and installation support was great.",
                    author: "Sarah Johnson",
                    location: "Doha, Qatar",
                    rating: 5
                },
                {
                    text: "Best sanitaryware brand in the region. We've been using Bella products for years and the quality is consistently excellent. Their after-sales service is commendable.",
                    author: "Rajesh Patel",
                    location: "Ahmedabad, India",
                    rating: 5
                }
            ];

            // Showroom Google Maps links
            const showroomLinks = {
                oman: 'https://maps.google.com/?q=Bella+Bathware+Muscat',
                india: 'https://maps.google.com/?q=Bella+Bathware+India',
                uae: 'https://maps.google.com/?q=Bella+Bathware+Dubai',
                qatar: 'https://maps.google.com/?q=Bella+Bathware+Qatar'
            };

            return (
                <div className="page active">
                    {/* HERO - With Thumbnail Selector */}
                    <section className="relative">
                        {/* Main Hero Image */}
                        <div className="relative h-[70vh] md:h-[80vh] overflow-hidden">
                            {heroSlides.map((slide, index) => (
                                <div
                                    key={index}
                                    className={`absolute inset-0 transition-opacity duration-700 ${
                                        activeHeroIndex === index ? 'opacity-100' : 'opacity-0'
                                    }`}
                                >
                                    <img
                                        src={slide.image}
                                        alt={slide.title}
                                        className="w-full h-full object-cover"
                                    />
                                    <div className="absolute inset-0 bg-gradient-to-r from-black/70 via-black/30 to-transparent" />
                                </div>
                            ))}

                            {/* Content Overlay */}
                            <div className="absolute inset-0 flex items-center">
                                <div className="px-5 md:px-8 lg:px-16 max-w-7xl mx-auto w-full">
                                    <div className="flex justify-between items-center">
                                        <div className="max-w-xl">
                                            <p className="text-white/80 text-sm md:text-base mb-2">25+ Years of Luxury Living</p>
                                            <h1 className="text-3xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-4 transition-all duration-500">
                                                {heroSlides[activeHeroIndex].title}
                                            </h1>
                                            <p className="text-white/90 text-base md:text-lg mb-6">
                                                {heroSlides[activeHeroIndex].subtitle}
                                            </p>
                                            <button
                                                onClick={() => navigate('shop')}
                                                className="inline-flex items-center gap-2 text-white font-semibold hover:text-gold transition-colors"
                                            >
                                                Shop Now
                                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                                </svg>
                                            </button>
                                        </div>

                                        {/* Thumbnail Selector - Right Side */}
                                        <div className="hidden md:flex flex-col gap-3 mr-4 lg:mr-8 p-2 rounded-2xl bg-black/30 backdrop-blur-sm">
                                            {heroSlides.map((slide, index) => (
                                                <button
                                                    key={index}
                                                    onClick={() => setActiveHeroIndex(index)}
                                                    className={`flex-shrink-0 w-16 h-16 lg:w-20 lg:h-20 rounded-xl overflow-hidden transition-all duration-300 ${
                                                        activeHeroIndex === index
                                                            ? 'ring-2 ring-white shadow-lg scale-105'
                                                            : 'ring-1 ring-white/40 opacity-70 hover:opacity-100 hover:ring-white/70'
                                                    }`}
                                                >
                                                    <img
                                                        src={slide.image}
                                                        alt={slide.title}
                                                        className="w-full h-full object-cover"
                                                    />
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Mobile Thumbnail Selector - Bottom */}
                            <div className="absolute bottom-4 left-0 right-0 md:hidden">
                                <div className="flex justify-center gap-2 px-4 py-2 mx-4 rounded-xl bg-black/30 backdrop-blur-sm">
                                    {heroSlides.map((slide, index) => (
                                        <button
                                            key={index}
                                            onClick={() => setActiveHeroIndex(index)}
                                            className={`flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden transition-all duration-300 ${
                                                activeHeroIndex === index
                                                    ? 'ring-2 ring-white shadow-lg scale-105'
                                                    : 'ring-1 ring-white/40 opacity-70'
                                            }`}
                                        >
                                            <img
                                                src={slide.image}
                                                alt={slide.title}
                                                className="w-full h-full object-cover"
                                            />
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>

                    </section>

                    {/* FEATURED CATEGORIES - Interactive Accordion Style */}
                    <section className="py-10 md:py-16 bg-gray-100">
                        <div className="px-5 md:px-8 lg:px-16 max-w-7xl mx-auto">
                            <AccordionCategories navigate={navigate} categories={rootCategories.slice(0, 4)} />
                        </div>
                    </section>

                    {/* CUSTOMER REVIEWS */}
                    <section className="py-12 md:py-20 bg-white">
                        <div className="px-5 md:px-8 lg:px-16 max-w-7xl mx-auto">
                            <h2 className="text-2xl md:text-3xl lg:text-4xl font-display font-bold text-navy text-center mb-10 md:mb-14">
                                Customer Reviews
                            </h2>

                            {/* Reviews Carousel */}
                            <div className="relative">
                                {/* Desktop: Show 3 reviews */}
                                <div className="hidden md:flex items-center gap-6 justify-center">
                                    {[-1, 0, 1].map((offset) => {
                                        const index = (reviewIndex + offset + reviews.length) % reviews.length;
                                        const review = reviews[index];
                                        const isCenter = offset === 0;
                                        return (
                                            <div
                                                key={index}
                                                className={`transition-all duration-500 ${
                                                    isCenter
                                                        ? 'w-[400px] opacity-100 scale-100'
                                                        : 'w-[300px] opacity-50 scale-95'
                                                }`}
                                            >
                                                <div className={`bg-white rounded-2xl p-6 ${isCenter ? 'shadow-xl border border-bella-200' : ''}`}>
                                                    <p className={`text-gray-600 mb-4 ${isCenter ? 'text-base' : 'text-sm'} line-clamp-5`}>
                                                        {review.text}
                                                    </p>
                                                    <div className="flex items-center justify-center mb-3">
                                                        <span className="text-4xl text-bella-300">"</span>
                                                    </div>
                                                    <div className="flex justify-center gap-1 mb-2">
                                                        {[...Array(5)].map((_, i) => (
                                                            <svg key={i} className="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                                            </svg>
                                                        ))}
                                                    </div>
                                                    {isCenter && (
                                                        <div className="text-center">
                                                            <p className="font-semibold text-navy">{review.author}</p>
                                                            <p className="text-sm text-gray-500">{review.location}</p>
                                                        </div>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                {/* Mobile: Show 1 review */}
                                <div className="md:hidden">
                                    <div className="bg-white rounded-2xl p-6 shadow-lg border border-bella-200 mx-auto max-w-sm">
                                        <p className="text-gray-600 mb-4 text-sm">
                                            {reviews[reviewIndex].text}
                                        </p>
                                        <div className="flex items-center justify-center mb-3">
                                            <span className="text-4xl text-bella-300">"</span>
                                        </div>
                                        <div className="flex justify-center gap-1 mb-3">
                                            {[...Array(5)].map((_, i) => (
                                                <svg key={i} className="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                                </svg>
                                            ))}
                                        </div>
                                        <div className="text-center">
                                            <p className="font-semibold text-navy">{reviews[reviewIndex].author}</p>
                                            <p className="text-sm text-gray-500">{reviews[reviewIndex].location}</p>
                                        </div>
                                    </div>
                                </div>

                                {/* Navigation Arrows */}
                                <button
                                    onClick={() => setReviewIndex((prev) => (prev - 1 + reviews.length) % reviews.length)}
                                    className="absolute left-0 top-1/2 -translate-y-1/2 w-10 h-10 md:w-12 md:h-12 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-bella-50 transition-colors z-10"
                                >
                                    <svg className="w-5 h-5 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                                    </svg>
                                </button>
                                <button
                                    onClick={() => setReviewIndex((prev) => (prev + 1) % reviews.length)}
                                    className="absolute right-0 top-1/2 -translate-y-1/2 w-10 h-10 md:w-12 md:h-12 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-bella-50 transition-colors z-10"
                                >
                                    <svg className="w-5 h-5 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>

                                {/* Dots Indicator */}
                                <div className="flex justify-center gap-2 mt-8">
                                    {reviews.map((_, index) => (
                                        <button
                                            key={index}
                                            onClick={() => setReviewIndex(index)}
                                            className={`w-2.5 h-2.5 rounded-full transition-all ${
                                                reviewIndex === index ? 'bg-navy w-6' : 'bg-gray-300'
                                            }`}
                                        />
                                    ))}
                                </div>
                            </div>

                            {/* Visit Our Showrooms Link */}
                            <div className="text-center mt-10">
                                <p className="text-gray-500 mb-4">Experience our products in person</p>
                                <a
                                    href="https://maps.google.com/?q=Bella+Bathware"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="inline-flex items-center gap-2 bg-navy text-white font-semibold px-6 py-3 rounded-full hover:bg-navy-light transition-colors"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                    </svg>
                                    Visit Our Showrooms
                                </a>
                            </div>
                        </div>
                    </section>

                    {/* ABOUT / HERITAGE - With Spa Image */}
                    <section className="relative py-12 md:py-20 overflow-hidden">
                        {/* Background Image */}
                        <div className="absolute inset-0">
                            <img
                                src="https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg"
                                alt="Spa Experience"
                                className="w-full h-full object-cover"
                            />
                            <div className="absolute inset-0 bg-navy/85" />
                        </div>

                        <div className="relative z-10 px-5 md:px-8 lg:px-12 max-w-7xl mx-auto">
                            <div className="grid md:grid-cols-2 gap-8 md:gap-12 items-center">
                                {/* Content */}
                                <div className="order-2 md:order-1">
                                    <div className="flex items-center gap-3 mb-4">
                                        <img src="Since 1999_Blue Filled.png" alt="Since 1999" className="h-12 md:h-16 w-auto brightness-0 invert" />
                                        <div>
                                            <p className="text-gold text-xs font-semibold tracking-wider">SINCE 1999</p>
                                            <p className="text-white text-2xl md:text-3xl font-display font-bold">25+ Years</p>
                                        </div>
                                    </div>

                                    <h2 className="text-2xl md:text-3xl lg:text-4xl font-display font-bold text-white mb-4 md:mb-6">
                                        A Legacy of <span className="text-gold">Excellence</span>
                                    </h2>

                                    <p className="text-white/80 text-base md:text-lg leading-relaxed mb-6">
                                        From humble beginnings to becoming a regional leader in luxury sanitaryware.
                                        We bring Italian craftsmanship to homes across the Middle East and India.
                                    </p>

                                    {/* Countries - Scrollable on mobile */}
                                    <div className="mb-6">
                                        <p className="text-white/60 text-sm mb-3">Serving customers in</p>
                                        <div className="flex flex-wrap gap-2">
                                            {[
                                                { name: 'India', flag: 'ðŸ‡®ðŸ‡³' },
                                                { name: 'Oman', flag: 'ðŸ‡´ðŸ‡²' },
                                                { name: 'UAE', flag: 'ðŸ‡¦ðŸ‡ª' },
                                                { name: 'Qatar', flag: 'ðŸ‡¶ðŸ‡¦' }
                                            ].map((country, i) => (
                                                <span key={i} className="inline-flex items-center gap-1.5 bg-white/15 backdrop-blur-sm rounded-full px-3 py-1.5 text-sm">
                                                    <span>{country.flag}</span>
                                                    <span className="text-white font-medium">{country.name}</span>
                                                </span>
                                            ))}
                                        </div>
                                    </div>

                                    <button
                                        onClick={() => navigate('about')}
                                        className="bg-gold hover:bg-gold-dark text-white font-bold px-6 py-3 rounded-full transition-all inline-flex items-center gap-2"
                                    >
                                        Our Story
                                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                        </svg>
                                    </button>
                                </div>

                                {/* Stats Cards */}
                                <div className="order-1 md:order-2 grid grid-cols-2 gap-3 md:gap-4">
                                    {[
                                        { value: '1M+', label: 'Happy Customers', icon: 'ðŸ˜Š' },
                                        { value: '5000+', label: 'Products', icon: 'ðŸš¿' },
                                        { value: '4', label: 'Countries', icon: 'ðŸŒ' },
                                        { value: '100+', label: 'Showrooms', icon: 'ðŸª' }
                                    ].map((stat, i) => (
                                        <div key={i} className="bg-white/10 backdrop-blur-sm rounded-2xl p-4 md:p-6 text-center">
                                            <span className="text-2xl md:text-3xl mb-2 block">{stat.icon}</span>
                                            <p className="text-2xl md:text-3xl font-display font-bold text-white">{stat.value}</p>
                                            <p className="text-white/70 text-xs md:text-sm">{stat.label}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* WHY BELLA - Clean cards */}
                    <section className="py-10 md:py-16 lg:py-20" style={{ backgroundColor: '#faf9f7' }}>
                        <div className="px-5 md:px-8 lg:px-12 max-w-7xl mx-auto">
                            <div className="text-center mb-8 md:mb-12">
                                <p className="text-xs md:text-sm font-semibold tracking-wider mb-1" style={{ color: '#b8860b' }}>{t('whyBella')}</p>
                                <h2 className="text-2xl md:text-3xl lg:text-4xl font-display font-bold" style={{ color: '#1a252f' }}>{t('whyBellaSubtitle')}</h2>
                            </div>

                            <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6">
                                {[
                                    { icon: 'âœ¨', title: t('premiumQuality'), desc: t('premiumQualityDesc') },
                                    { icon: 'ðŸ’°', title: t('expertInstallation'), desc: t('expertInstallationDesc') },
                                    { icon: 'ðŸ”§', title: t('warrantySupport'), desc: t('warrantySupportDesc') },
                                    { icon: 'ðŸ›¡ï¸', title: t('warranty'), desc: t('warrantySupportDesc') }
                                ].map((feature, i) => (
                                    <div key={i} className="rounded-2xl p-4 md:p-6 text-center shadow-sm hover:shadow-md transition-shadow" style={{ backgroundColor: '#ffffff', border: '1px solid #e8e4dd' }}>
                                        <span className="text-3xl md:text-4xl mb-3 block">{feature.icon}</span>
                                        <h3 className="font-display font-bold text-base md:text-lg mb-1" style={{ color: '#1a252f' }}>{feature.title}</h3>
                                        <p className="text-xs md:text-sm" style={{ color: '#726758' }}>{feature.desc}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* CTA - Full width on mobile */}
                    <section className="py-10 md:py-16" style={{ backgroundColor: '#0d1318' }}>
                        <div className="px-5 md:px-8 lg:px-12 max-w-4xl mx-auto text-center">
                            <h2 className="text-2xl md:text-3xl lg:text-4xl font-display font-bold mb-3 md:mb-4" style={{ color: '#ffffff' }}>
                                {t('readyTransform')}
                            </h2>
                            <p className="text-base md:text-lg mb-6 md:mb-8" style={{ color: '#d4cec3' }}>
                                {t('browseCollection')}
                            </p>
                            <div className="flex flex-col sm:flex-row gap-3 justify-center">
                                <button
                                    onClick={() => navigate('shop')}
                                    className="font-bold px-8 py-4 rounded-full transition-all active:scale-95"
                                    style={{ backgroundColor: '#b8860b', color: '#ffffff' }}
                                >
                                    {t('browseProducts')}
                                </button>
                                <button
                                    onClick={() => navigate('contact')}
                                    className="font-bold px-8 py-4 rounded-full transition-all"
                                    style={{ backgroundColor: 'transparent', border: '2px solid #9d8f7b', color: '#d4cec3' }}
                                >
                                    {t('findShowroom')}
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // CATEGORY LANDING PAGE - Premium Collections Design
        // ============================================
        // ============================================
        // CATEGORY LANDING PAGE - Premium Collections Design
        // ============================================
        const CategoryLandingPage = ({ categoryId, navigate, categories }) => {
            const { t } = useLocale();
            const [isVisible, setIsVisible] = useState(false);
            const category = categories.find(c => c.id === parseInt(categoryId));
            const childCategories = categories.filter(c => c.parentId === parseInt(categoryId));
            const parentCategory = category?.parentId ? categories.find(c => c.id === category.parentId) : null;

            useEffect(() => {
                setIsVisible(false);
                const timer = setTimeout(() => setIsVisible(true), 100);
                return () => clearTimeout(timer);
            }, [categoryId]);

            // Category-specific images from Bella Store
            const categoryImages = {
                // Showers & Bathroom
                'shower': 'https://erp.bellastore.in/web/image/202919-e009c2cb/Basin%20Accessory_1.jpg',
                'concealed': 'https://erp.bellastore.in/web/image/202919-e009c2cb/Basin%20Accessory_1.jpg',
                'rain': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',

                // Faucets & Mixers
                'faucet': 'https://erp.bellastore.in/web/image/230956-b0ef75d8/Faucets.jpg',
                'mixer': 'https://erp.bellastore.in/web/image/202913-d1140b9e/Basin%20Mixer%20Bella_2.jpg',
                'basin mixer': 'https://erp.bellastore.in/web/image/163356-246717a8/BM%2013111%20CH%20Basin%20Mixer.webp',
                'tap': 'https://erp.bellastore.in/web/image/230956-b0ef75d8/Faucets.jpg',

                // Basins & Sinks
                'basin': 'https://erp.bellastore.in/web/image/202913-d1140b9e/Basin%20Mixer%20Bella_2.jpg',
                'sink': 'https://erp.bellastore.in/web/image/155028-dce337ac/Bella_Kitchen%20Mixer.webp',
                'cabinet': 'https://erp.bellastore.in/web/image/230965-edb4d4b5/Bella%20Cabinet.jpg',

                // Toilets & WC
                'toilet': 'https://erp.bellastore.in/web/image/202964-991d1531/WC_1.jpg',
                'wc': 'https://erp.bellastore.in/web/image/202964-991d1531/WC_1.jpg',
                'washlet': 'https://erp.bellastore.in/web/image/230867-88050164/Smart%2520Toilet.svg',
                'cistern': 'https://erp.bellastore.in/web/image/202964-991d1531/WC_1.jpg',

                // Wellness
                'bathtub': 'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',
                'jacuzzi': 'https://erp.bellastore.in/web/image/230968-1bf5481b/Bella%20Jacuzzi.jpg',
                'wellness': 'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',
                'steam': 'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',
                'sauna': 'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',

                // Kitchen
                'kitchen': 'https://erp.bellastore.in/web/image/155028-dce337ac/Bella_Kitchen%20Mixer.webp',

                // Accessories
                'accessory': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'accessories': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'mirror': 'https://erp.bellastore.in/web/image/230965-edb4d4b5/Bella%20Cabinet.jpg',
                'hygiene': 'https://erp.bellastore.in/web/image/230872-699da2aa/Soap%20Dispenser.jpg',

                // Collections/Series
                'collection': 'https://erp.bellastore.in/web/image/236275-db0ac4da/Italian%201.webp',
                'zs series': 'https://erp.bellastore.in/web/image/163337-f6e133bc/BM%2011150%20BG%20Basin%20Mixer%20GOLD.webp',
                'ga series': 'https://erp.bellastore.in/web/image/163356-246717a8/BM%2013111%20CH%20Basin%20Mixer.webp',
                'lp series': 'https://erp.bellastore.in/web/image/163334-864f6e82/B064%2001%2043%201.webp',
                'ec series': 'https://erp.bellastore.in/web/image/163335-1138688e/BM%20738711%20Basin%20Mixer.webp',
                'qv series': 'https://erp.bellastore.in/web/image/163355-c927fb6a/BM%20366501%20BN.webp',
                'sl series': 'https://erp.bellastore.in/web/image/163336-dac79a51/BM%2056110%20DB%20Basin%20Mixer%20BLACK.webp',
                'yn series': 'https://erp.bellastore.in/web/image/176426-4059ca54/BM%20366253%20GM',
                'nx series': 'https://erp.bellastore.in/web/image/163355-c927fb6a/BM%20366501%20BN.webp',
            };

            // Fallback pool for categories without specific images
            const categoryImagePool = [
                'https://erp.bellastore.in/web/image/230956-b0ef75d8/Faucets.jpg',
                'https://erp.bellastore.in/web/image/202913-d1140b9e/Basin%20Mixer%20Bella_2.jpg',
                'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',
                'https://erp.bellastore.in/web/image/230965-edb4d4b5/Bella%20Cabinet.jpg',
                'https://erp.bellastore.in/web/image/202964-991d1531/WC_1.jpg',
                'https://erp.bellastore.in/web/image/155028-dce337ac/Bella_Kitchen%20Mixer.webp',
                'https://erp.bellastore.in/web/image/230872-699da2aa/Soap%20Dispenser.jpg',
                'https://erp.bellastore.in/web/image/163337-f6e133bc/BM%2011150%20BG%20Basin%20Mixer%20GOLD.webp',
                'https://erp.bellastore.in/web/image/163356-246717a8/BM%2013111%20CH%20Basin%20Mixer.webp',
                'https://erp.bellastore.in/web/image/236275-db0ac4da/Italian%201.webp',
                'https://erp.bellastore.in/web/image/163334-864f6e82/B064%2001%2043%201.webp',
            ];

            // Hero images for main categories
            const heroImages = {
                'bathroom': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'washroom': 'https://erp.bellastore.in/web/image/230956-b0ef75d8/Faucets.jpg',
                'wellness': 'https://erp.bellastore.in/web/image/230970-9cad5bfa/Bella%20Jacuzzi.jpg',
                'kitchen': 'https://erp.bellastore.in/web/image/155028-dce337ac/Bella_Kitchen%20Mixer.webp',
                'collections': 'https://erp.bellastore.in/web/image/236275-db0ac4da/Italian%201.webp',
                'washlet': 'https://erp.bellastore.in/web/image/202964-991d1531/WC_1.jpg',
                'bath essentials': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'misc': 'https://erp.bellastore.in/web/image/230959-bd479085/Accessories.jpg',
                'default': 'https://erp.bellastore.in/web/image/236275-db0ac4da/Italian%201.webp'
            };

            const getHeroImage = () => {
                if (!category) return heroImages.default;
                const slug = category.slug?.toLowerCase() || category.name?.toLowerCase();
                // Try exact match first
                if (heroImages[slug]) return heroImages[slug];
                // Try partial match
                for (const [key, url] of Object.entries(heroImages)) {
                    if (slug.includes(key) || key.includes(slug)) return url;
                }
                return heroImages.default;
            };

            // Get image for subcategory based on name matching
            const getSubcategoryImage = (subCat, index) => {
                const name = subCat.name?.toLowerCase() || '';
                // Try to match category-specific image
                for (const [key, url] of Object.entries(categoryImages)) {
                    if (name.includes(key)) return url;
                }
                // Fallback to pool
                const imageIndex = (subCat.id + index) % categoryImagePool.length;
                return categoryImagePool[imageIndex];
            };

            // Category taglines - auto-generated based on category name
            const getTagline = (catName) => {
                const taglines = {
                    'taps': 'Precision Engineering Meets Elegant Design',
                    'faucets': 'Where Form Flows Into Function',
                    'basins': 'Sculptural Beauty for Modern Spaces',
                    'sinks': 'Crafted Excellence in Every Detail',
                    'toilets': 'Innovative Comfort & Hygiene',
                    'wc': 'Advanced Technology, Timeless Style',
                    'showers': 'Transform Your Daily Ritual',
                    'bathtubs': 'Immerse Yourself in Luxury',
                    'vanity': 'Statement Pieces for Refined Tastes',
                    'mirrors': 'Reflecting Perfection',
                    'cabinets': 'Smart Storage, Beautiful Design',
                    'accessories': 'The Finishing Touches of Excellence',
                    'wellness': 'Your Personal Sanctuary Awaits',
                    'furniture': 'Functional Art for Your Space',
                };
                const lowerName = catName.toLowerCase();
                for (const [key, tagline] of Object.entries(taglines)) {
                    if (lowerName.includes(key)) return tagline;
                }
                return 'Discover Exceptional Quality & Design';
            };

            // Handle subcategory click
            const handleSubcategoryClick = (subCat) => {
                const hasChildren = subCat.childIds?.length > 0;
                if (hasChildren) {
                    navigate('category', { categoryId: subCat.id });
                } else {
                    navigate('shop', { categoryId: subCat.id });
                }
            };

            if (!category) {
                return (
                    <div className="page active pt-24">
                        <div className="max-w-7xl mx-auto px-6 py-20 text-center">
                            <div className="w-20 h-20 mx-auto mb-6 rounded-full bg-bella-100 flex items-center justify-center">
                                <svg className="w-10 h-10 text-bella-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <h1 className="text-3xl font-display font-bold text-navy mb-3">Collection Not Found</h1>
                            <p className="text-bella-600 mb-8">The collection you're looking for doesn't exist or has been moved.</p>
                            <button onClick={() => navigate('shop')} className="bg-gold hover:bg-gold-dark text-white px-8 py-3 rounded-full font-semibold transition-all hover:shadow-lg">
                                Browse All Products
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="page active">
                    {/* Hero Banner - Cinematic Style */}
                    <section className="relative h-[400px] md:h-[500px] overflow-hidden">
                        <img
                            src={getHeroImage()}
                            alt={category.name}
                            className="w-full h-full object-cover"
                        />
                        <div className="absolute inset-0 bg-gradient-to-r from-navy/90 via-navy/70 to-transparent" />
                        <div className="absolute inset-0 bg-gradient-to-t from-navy/50 to-transparent" />

                        {/* Hero Content */}
                        <div className="absolute inset-0 flex items-center">
                            <div className="max-w-7xl mx-auto px-6 w-full">
                                {/* Breadcrumb in hero */}
                                <div className="flex items-center text-sm text-white/60 mb-6">
                                    <span className="cursor-pointer hover:text-gold transition-colors" onClick={() => navigate('home')}>Home</span>
                                    <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                    </svg>
                                    {parentCategory && (
                                        <>
                                            <span className="cursor-pointer hover:text-gold transition-colors" onClick={() => navigate('category', { categoryId: parentCategory.id })}>
                                                {parentCategory.name}
                                            </span>
                                            <svg className="w-4 h-4 mx-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                            </svg>
                                        </>
                                    )}
                                    <span className="text-gold font-medium">{category.name}</span>
                                </div>

                                {/* Title & Description */}
                                <h1 className="font-display text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-4 leading-tight">
                                    {category.name}
                                </h1>
                                <div className="w-20 h-1 bg-gradient-to-r from-gold to-gold-light mb-6"></div>
                                <p className="text-bella-200 text-lg md:text-xl max-w-2xl leading-relaxed mb-8">
                                    {getTagline(category.name)}
                                </p>

                                {/* Stats */}
                                <div className="flex items-center gap-8">
                                    <div>
                                        <div className="text-3xl font-display font-bold text-white">{childCategories.length}</div>
                                        <div className="text-white/60 text-sm">Collections</div>
                                    </div>
                                    <div className="w-px h-12 bg-white/20"></div>
                                    <div>
                                        <div className="text-3xl font-display font-bold text-white">{category.totalCount || category.count || 0}</div>
                                        <div className="text-white/60 text-sm">Products</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Decorative element */}
                        <div className="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-bella-50 to-transparent"></div>
                    </section>

                    {/* Collections Grid */}
                    <section className="py-16 md:py-24 bg-bella-50">
                        <div className="max-w-7xl mx-auto px-6">
                            {/* Section Header */}
                            <div className="text-center mb-16">
                                <span className="text-gold text-sm font-semibold tracking-widest uppercase">Explore</span>
                                <h2 className="font-display text-3xl md:text-4xl font-bold text-navy mt-2">
                                    Our {category.name} Collections
                                </h2>
                                <p className="text-bella-600 mt-4 max-w-2xl mx-auto">
                                    Discover our curated selection of premium {category.name.toLowerCase()} products, each designed to bring elegance and functionality to your space.
                                </p>
                            </div>

                            {childCategories.length > 0 ? (
                                <>
                                    {/* Premium Grid - 3 columns for larger tiles */}
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                        {childCategories.map((subCat, index) => (
                                            <div
                                                key={subCat.id}
                                                onClick={() => handleSubcategoryClick(subCat)}
                                                className={`collection-tile cursor-pointer group ${isVisible ? 'visible' : ''}`}
                                                style={{
                                                    animationDelay: `${index * 0.1}s`,
                                                    opacity: isVisible ? 1 : 0,
                                                    transform: isVisible ? 'translateY(0)' : 'translateY(30px)',
                                                    transition: `all 0.6s ease ${index * 0.1}s`
                                                }}
                                            >
                                                {/* Image Container */}
                                                <div className="aspect-[4/3] overflow-hidden">
                                                    <img
                                                        src={getSubcategoryImage(subCat, index)}
                                                        alt={subCat.name}
                                                        className="collection-tile-img w-full h-full object-cover"
                                                        loading="lazy"
                                                    />
                                                </div>

                                                {/* Static Content (visible by default) */}
                                                <div className="collection-tile-static">
                                                    <h3 className="font-display text-xl font-bold text-white mb-1">
                                                        {subCat.name}
                                                    </h3>
                                                    {subCat.totalCount > 0 && (
                                                        <span className="text-white/70 text-sm">{subCat.totalCount} {t('productsCount')}</span>
                                                    )}
                                                </div>

                                                {/* Hover Content */}
                                                <div className="collection-tile-content">
                                                    <span className="inline-block px-3 py-1 bg-gold/20 text-gold text-xs font-semibold rounded-full mb-3">
                                                        {subCat.childIds?.length > 0 ? 'VIEW COLLECTION' : 'BROWSE PRODUCTS'}
                                                    </span>
                                                    <h3 className="font-display text-2xl font-bold text-white mb-2">
                                                        {subCat.name}
                                                    </h3>
                                                    <p className="text-white/80 text-sm mb-4 line-clamp-2">
                                                        {getTagline(subCat.name)}
                                                    </p>
                                                    <div className="flex items-center justify-between">
                                                        {subCat.totalCount > 0 && (
                                                            <span className="text-gold font-semibold">{subCat.totalCount} {t('productsCount')}</span>
                                                        )}
                                                        <span className="flex items-center text-white text-sm font-medium group-hover:text-gold transition-colors">
                                                            Explore
                                                            <svg className="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                                            </svg>
                                                        </span>
                                                    </div>
                                                </div>

                                                {/* Corner Accent */}
                                                <div className="absolute top-0 right-0 w-24 h-24 overflow-hidden">
                                                    <div className="absolute -top-12 -right-12 w-24 h-24 bg-gold/10 rotate-45 transform group-hover:bg-gold/20 transition-colors"></div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>

                                    {/* View All Button */}
                                    <div className="text-center mt-16">
                                        <button
                                            onClick={() => navigate('shop', { categoryId: category.id })}
                                            className="group inline-flex items-center gap-3 bg-navy hover:bg-navy-light text-white px-10 py-4 rounded-full font-semibold transition-all hover:shadow-xl hover:shadow-navy/20"
                                        >
                                            <span>{t('viewAll')} {category.name}</span>
                                            <span className="flex items-center justify-center w-8 h-8 bg-gold rounded-full group-hover:bg-gold-light transition-colors">
                                                <svg className="w-4 h-4 text-navy" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                                </svg>
                                            </span>
                                        </button>
                                        <p className="text-bella-500 text-sm mt-4">
                                            {category.totalCount || category.count || 0} {t('productsCount')}
                                        </p>
                                    </div>
                                </>
                            ) : (
                                // No subcategories - direct to products
                                <div className="text-center py-12">
                                    <div className="max-w-md mx-auto">
                                        <div className="w-24 h-24 mx-auto mb-8 rounded-full bg-gold/10 flex items-center justify-center">
                                            <svg className="w-12 h-12 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                                            </svg>
                                        </div>
                                        <h3 className="font-display text-2xl font-bold text-navy mb-3">
                                            Explore Our {category.name} Collection
                                        </h3>
                                        <p className="text-bella-600 mb-8">
                                            Browse through {category.totalCount || category.count || 0} carefully selected products in this collection.
                                        </p>
                                        <button
                                            onClick={() => navigate('shop', { categoryId: category.id })}
                                            className="bg-gold hover:bg-gold-dark text-white px-10 py-4 rounded-full font-semibold transition-all hover:shadow-lg"
                                        >
                                            View All Products
                                        </button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </section>

                    {/* Features Section */}
                    <section className="py-16 bg-white border-t border-bella-100">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
                                {[
                                    { icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z', title: 'Quality Assured', desc: 'Premium materials & craftsmanship' },
                                    { icon: 'M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4', title: 'Fast Delivery', desc: 'Secure packaging & timely shipping' },
                                    { icon: 'M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15', title: 'Easy Returns', desc: '30-day hassle-free return policy' },
                                    { icon: 'M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z', title: 'Expert Support', desc: 'Dedicated assistance for you' }
                                ].map((feature, i) => (
                                    <div key={i} className="text-center group">
                                        <div className="w-14 h-14 mx-auto mb-4 rounded-full bg-bella-50 flex items-center justify-center group-hover:bg-gold/10 transition-colors">
                                            <svg className="w-6 h-6 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d={feature.icon} />
                                            </svg>
                                        </div>
                                        <h4 className="font-semibold text-navy text-sm">{feature.title}</h4>
                                        <p className="text-bella-500 text-xs mt-1">{feature.desc}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // PRODUCT CARD COMPONENT
        // ============================================
        const ProductCard = ({ product, onClick }) => {
            const { addToCart } = useCart();
            const { toggleWishlist, isInWishlist } = useWishlist();
            const { countryConfig, formatPrice } = useLocale();
            const inWishlist = isInWishlist(product.id);

            const handleAddToCart = (e) => {
                e.stopPropagation();
                if (product.inStock !== false) {
                    addToCart(product, 1);
                }
            };

            const handleToggleWishlist = (e) => {
                e.stopPropagation();
                toggleWishlist(product);
            };

            return (
                <div className="product-card bg-white rounded-2xl overflow-hidden shadow-sm cursor-pointer" onClick={onClick}>
                    <div className="relative h-56 bg-bella-100">
                        <img
                            src={product.thumbnail || product.image}
                            alt={product.name}
                            className="w-full h-full object-cover"
                            loading="lazy"
                        />
                        {/* Ribbon */}
                        {product.ribbonName && (
                            <div className="ribbon-badge bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold uppercase">
                                {product.ribbonName}
                            </div>
                        )}
                        {/* Wishlist */}
                        <button
                            className={`absolute top-3 right-3 w-9 h-9 rounded-full flex items-center justify-center shadow-md transition-colors ${inWishlist ? 'bg-red-50 hover:bg-red-100' : 'bg-white hover:bg-bella-50'}`}
                            onClick={handleToggleWishlist}
                        >
                            <svg className={`w-4 h-4 ${inWishlist ? 'text-red-500' : 'text-bella-600'}`} fill={inWishlist ? 'currentColor' : 'none'} stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </button>
                        {/* Out of stock */}
                        {!product.inStock && (
                            <div className="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                                <span className="bg-white text-navy px-4 py-2 rounded-lg font-semibold text-sm">
                                    {product.outOfStockMessage || 'Out of Stock'}
                                </span>
                            </div>
                        )}
                    </div>
                    <div className="p-4">
                        <p className="text-bella-500 text-xs uppercase tracking-wide">{product.category}</p>
                        <h3 className="font-display text-lg font-semibold text-navy mt-1 line-clamp-2">{product.name}</h3>
                        <div className="flex items-center justify-between mt-3">
                            <p className="text-xl font-bold text-navy">{countryConfig.currencySymbol} {formatPrice(product.price)}</p>
                            <button
                                className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${product.inStock !== false ? 'bg-gold hover:bg-gold-dark text-white' : 'bg-bella-200 text-bella-500 cursor-not-allowed'}`}
                                onClick={handleAddToCart}
                                disabled={product.inStock === false}
                            >
                                Add
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // ============================================
        // CATEGORY SIDEBAR
        // ============================================
        const CategorySidebar = ({ categories, selectedCategoryId, onSelectCategory }) => {
            const { t } = useLocale();
            const [expandedCategories, setExpandedCategories] = useState([]);

            const toggleExpand = (catId) => {
                setExpandedCategories(prev =>
                    prev.includes(catId) ? prev.filter(id => id !== catId) : [...prev, catId]
                );
            };

            // Build tree from flat categories
            const rootCategories = categories.filter(c => c.parentId === null);

            const renderCategory = (cat, level = 0) => {
                const children = categories.filter(c => c.parentId === cat.id);
                const hasChildren = children.length > 0;
                const isExpanded = expandedCategories.includes(cat.id);
                const isSelected = selectedCategoryId === cat.id;
                // If parent has children but no direct products, clicking should toggle expand
                const hasDirectProducts = cat.count > 0;
                const shouldToggleOnClick = hasChildren && !hasDirectProducts;

                const handleCategoryClick = () => {
                    if (shouldToggleOnClick) {
                        // Toggle expansion for parent categories without direct products
                        toggleExpand(cat.id);
                    } else {
                        // Navigate to category for categories with products
                        onSelectCategory(cat.id);
                    }
                };

                return (
                    <div key={cat.id} className={level > 0 ? 'ml-4' : ''}>
                        <div className="flex items-center">
                            {hasChildren && (
                                <button onClick={() => toggleExpand(cat.id)} className="mr-2 text-bella-500 hover:text-gold">
                                    <svg className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-90' : ''}`} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>
                            )}
                            <button
                                onClick={handleCategoryClick}
                                className={`category-tree-item flex-1 text-left py-2 text-sm ${isSelected ? 'text-gold font-semibold' : 'text-bella-700 hover:text-gold'} ${shouldToggleOnClick ? 'cursor-pointer' : ''}`}
                            >
                                {cat.name}
                                <span className="text-bella-400 text-xs ml-2">({cat.totalCount || cat.count || 0})</span>
                            </button>
                        </div>
                        {hasChildren && isExpanded && (
                            <div className="border-l-2 border-bella-100 mt-1">
                                {children.map(child => renderCategory(child, level + 1))}
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="bg-white rounded-2xl p-6 sticky top-28">
                    <h3 className="font-semibold text-navy mb-4">{t('categories')}</h3>
                    <div className="space-y-1">
                        {rootCategories.map(cat => renderCategory(cat))}
                    </div>
                </div>
            );
        };

        // ============================================
        // SHOP PAGE
        // ============================================
        // Category-specific USPs configuration
        const categoryUSPs = {
            // Showers & Concealed
            'shower': [
                { icon: 'M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707', title: 'Precise Temperature', desc: 'Seamless hot & cold mixing' },
                { icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z', title: 'Safety Embedded', desc: 'Built-in protection box' },
                { icon: 'M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6z', title: 'Durable Thickness', desc: 'Long-lasting performance' },
            ],
            'faucet': [
                { icon: 'M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z', title: 'High Copper Content', desc: '59-62% brass composition' },
                { icon: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z', title: 'Corrosion Resistant', desc: 'Anti-rust finish coating' },
                { icon: 'M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z', title: 'Smooth Curves', desc: 'Elegant rounded edges' },
            ],
            'basin': [
                { icon: 'M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z', title: 'Art Design', desc: 'Sculptural aesthetics' },
                { icon: 'M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4', title: 'Premium Ceramic', desc: 'High-grade materials' },
                { icon: 'M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z', title: 'Easy Clean', desc: 'Stain-resistant glaze' },
            ],
            'toilet': [
                { icon: 'M13 10V3L4 14h7v7l9-11h-7z', title: 'Water Efficient', desc: 'Dual flush technology' },
                { icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z', title: 'Hygiene Pro', desc: 'Antibacterial surface' },
                { icon: 'M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4', title: 'Soft Close', desc: 'Silent seat mechanism' },
            ],
            'bathtub': [
                { icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z', title: 'Spa Experience', desc: 'Ultimate relaxation' },
                { icon: 'M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z', title: 'Heat Retention', desc: 'Long-lasting warmth' },
                { icon: 'M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z', title: 'Acrylic Body', desc: 'Lightweight & durable' },
            ],
            'wellness': [
                { icon: 'M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z', title: 'Therapeutic', desc: 'Health & wellness benefits' },
                { icon: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z', title: 'Smart Control', desc: 'Digital temperature' },
                { icon: 'M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z', title: 'Hydrotherapy', desc: 'Jet massage system' },
            ],
            'default': [
                { icon: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z', title: 'Quality Assured', desc: 'Premium materials' },
                { icon: 'M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4', title: 'Fast Delivery', desc: 'Secure packaging' },
                { icon: 'M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z', title: 'Expert Support', desc: 'Dedicated assistance' },
            ]
        };

        // Get USPs based on category name
        const getCategoryUSPs = (categoryName) => {
            if (!categoryName) return categoryUSPs.default;
            const name = categoryName.toLowerCase();
            if (name.includes('shower') || name.includes('concealed')) return categoryUSPs.shower;
            if (name.includes('faucet') || name.includes('tap') || name.includes('mixer')) return categoryUSPs.faucet;
            if (name.includes('basin') || name.includes('sink')) return categoryUSPs.basin;
            if (name.includes('toilet') || name.includes('wc')) return categoryUSPs.toilet;
            if (name.includes('bath') || name.includes('tub') || name.includes('jacuzzi')) return categoryUSPs.bathtub;
            if (name.includes('wellness') || name.includes('spa') || name.includes('sauna')) return categoryUSPs.wellness;
            return categoryUSPs.default;
        };

        // Category taglines for shop page
        const getCategoryTagline = (categoryName) => {
            if (!categoryName) return 'Discover our complete range of premium bathroom solutions';
            const name = categoryName.toLowerCase();
            if (name.includes('shower') || name.includes('concealed')) return 'Precise temperature control with minimalist design for the modern bathroom';
            if (name.includes('faucet') || name.includes('tap')) return 'Where precision engineering meets elegant design';
            if (name.includes('basin') || name.includes('sink')) return 'Sculptural beauty crafted for contemporary spaces';
            if (name.includes('toilet') || name.includes('wc')) return 'Innovative hygiene technology with timeless aesthetics';
            if (name.includes('bath') || name.includes('tub')) return 'Transform your bathroom into a personal sanctuary';
            if (name.includes('wellness')) return 'Premium wellness solutions for ultimate relaxation';
            if (name.includes('mirror')) return 'Reflecting perfection in every detail';
            if (name.includes('cabinet') || name.includes('vanity')) return 'Smart storage meets sophisticated design';
            return 'Premium quality products for your perfect bathroom';
        };

        const ShopPage = ({ navigate, categories, selectedCategoryId, initialSearch = '' }) => {
            const { t, countryConfig, formatPrice } = useLocale();
            const [products, setProducts] = useState([]);
            const [loading, setLoading] = useState(true);
            const [priceRange, setPriceRange] = useState([0, 10000]);
            const [sortBy, setSortBy] = useState('featured');
            const [searchQuery, setSearchQuery] = useState(initialSearch);

            // Update search query when initialSearch changes (from navigation)
            useEffect(() => {
                if (initialSearch) {
                    setSearchQuery(initialSearch);
                }
            }, [initialSearch]);

            useEffect(() => {
                const loadProducts = async () => {
                    setLoading(true);
                    let data;
                    if (selectedCategoryId) {
                        data = await OdooAPI.fetchProductsByPublicCategory(selectedCategoryId);
                    } else {
                        data = await OdooAPI.fetchProducts();
                    }
                    setProducts(data);
                    setLoading(false);
                };
                loadProducts();
            }, [selectedCategoryId]);

            const filteredProducts = useMemo(() => {
                let result = [...products];

                // Price filter
                result = result.filter(p => p.price >= priceRange[0] && p.price <= priceRange[1]);

                // Search filter
                if (searchQuery) {
                    const query = searchQuery.toLowerCase();
                    result = result.filter(p =>
                        p.name.toLowerCase().includes(query) ||
                        p.category?.toLowerCase().includes(query)
                    );
                }

                // Sort
                switch (sortBy) {
                    case 'price-low': result.sort((a, b) => a.price - b.price); break;
                    case 'price-high': result.sort((a, b) => b.price - a.price); break;
                    case 'name': result.sort((a, b) => a.name.localeCompare(b.name)); break;
                }

                return result;
            }, [products, priceRange, sortBy, searchQuery]);

            const selectedCategory = categories.find(c => c.id === selectedCategoryId);
            const currentUSPs = getCategoryUSPs(selectedCategory?.name);
            const categoryTagline = getCategoryTagline(selectedCategory?.name);

            // Get subcategories of the selected category
            const subcategories = selectedCategoryId
                ? categories.filter(c => c.parentId === selectedCategoryId)
                : [];

            // Check if this category has subcategories (is a parent category)
            const hasSubcategories = subcategories.length > 0;

            const handleProductClick = (product) => {
                navigate('product', { slug: product.slug });
            };

            // Category line-art SVG illustrations
            const categoryIllustrations = {
                'shower': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <path d="M100 20 L100 50 M80 50 L120 50 M90 50 L90 60 Q90 70 80 75 L60 85 M110 50 L110 60 Q110 70 120 75 L140 85" strokeLinecap="round"/>
                        <circle cx="100" cy="15" r="8"/>
                        <path d="M70 90 Q100 100 130 90 M75 95 Q100 105 125 95 M80 100 Q100 110 120 100" strokeLinecap="round" opacity="0.5"/>
                        <rect x="85" y="110" width="30" height="25" rx="3"/>
                        <circle cx="100" cy="122" r="5"/>
                    </svg>
                ),
                'faucet': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <path d="M40 100 L40 60 Q40 40 60 40 L140 40 Q160 40 160 60 L160 70" strokeLinecap="round"/>
                        <path d="M160 70 Q160 90 140 95 L100 105 Q80 110 80 130" strokeLinecap="round"/>
                        <ellipse cx="80" cy="135" rx="15" ry="5"/>
                        <circle cx="100" cy="40" r="12"/>
                        <path d="M100 28 L100 20 M92 32 L85 25 M108 32 L115 25" strokeLinecap="round"/>
                        <rect x="35" y="100" width="10" height="30" rx="2"/>
                    </svg>
                ),
                'basin': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <ellipse cx="100" cy="50" rx="70" ry="25"/>
                        <path d="M30 50 Q30 110 60 120 L140 120 Q170 110 170 50" strokeLinecap="round"/>
                        <ellipse cx="100" cy="100" rx="15" ry="5"/>
                        <path d="M100 105 L100 130 Q100 140 110 140 L130 140" strokeLinecap="round"/>
                        <path d="M85 35 L85 25 Q85 15 100 15 Q115 15 115 25 L115 35" strokeLinecap="round"/>
                    </svg>
                ),
                'toilet': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <ellipse cx="100" cy="100" rx="50" ry="30"/>
                        <path d="M50 100 Q50 130 70 135 L130 135 Q150 130 150 100"/>
                        <rect x="60" y="20" width="80" height="50" rx="5"/>
                        <path d="M70 70 L70 85 Q70 95 100 95 Q130 95 130 85 L130 70"/>
                        <rect x="90" y="30" width="20" height="10" rx="2"/>
                    </svg>
                ),
                'bathtub': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <path d="M20 60 L180 60 Q190 60 190 70 L190 100 Q190 130 160 130 L40 130 Q10 130 10 100 L10 70 Q10 60 20 60" strokeLinecap="round"/>
                        <path d="M30 60 L30 40 Q30 30 45 30 L50 30" strokeLinecap="round"/>
                        <circle cx="55" cy="30" r="8"/>
                        <path d="M60 25 L70 20" strokeLinecap="round"/>
                        <ellipse cx="100" cy="95" rx="60" ry="20" opacity="0.3"/>
                    </svg>
                ),
                'default': (
                    <svg viewBox="0 0 200 150" fill="none" stroke="currentColor" strokeWidth="1" className="w-full h-full text-bella-300">
                        <circle cx="100" cy="75" r="50" opacity="0.3"/>
                        <path d="M70 55 L70 45 Q70 35 85 35 L115 35 Q130 35 130 45 L130 55" strokeLinecap="round"/>
                        <path d="M100 85 L100 115" strokeLinecap="round"/>
                        <circle cx="100" cy="70" r="20"/>
                        <path d="M90 65 Q100 75 110 65" strokeLinecap="round"/>
                    </svg>
                )
            };

            // Get illustration based on category
            const getCategoryIllustration = (categoryName) => {
                if (!categoryName) return categoryIllustrations.default;
                const name = categoryName.toLowerCase();
                if (name.includes('shower') || name.includes('concealed')) return categoryIllustrations.shower;
                if (name.includes('faucet') || name.includes('tap') || name.includes('mixer') || name.includes('spout')) return categoryIllustrations.faucet;
                if (name.includes('basin') || name.includes('sink')) return categoryIllustrations.basin;
                if (name.includes('toilet') || name.includes('wc')) return categoryIllustrations.toilet;
                if (name.includes('bath') || name.includes('tub') || name.includes('jacuzzi')) return categoryIllustrations.bathtub;
                return categoryIllustrations.default;
            };

            return (
                <div className="page active">
                    {/* Unified Category Header - Illustration + Title + USPs in one row */}
                    {selectedCategory && (
                        <div className="bg-gradient-to-r from-bella-50 via-white to-bella-50 border-b border-bella-100">
                            <div className="max-w-7xl mx-auto px-6 py-6">
                                {/* Breadcrumb + Search/Sort Row */}
                                <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
                                    <div className="flex items-center text-sm text-bella-500">
                                        <span className="cursor-pointer hover:text-navy transition-colors" onClick={() => navigate('home')}>Home</span>
                                        <span className="mx-2">/</span>
                                        <span className="cursor-pointer hover:text-navy transition-colors" onClick={() => navigate('shop')}>Shop</span>
                                        <span className="mx-2">/</span>
                                        <span className="text-navy font-medium">{selectedCategory.name}</span>
                                    </div>
                                    <div className="flex items-center gap-3">
                                        <div className="relative">
                                            <svg className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-bella-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                            </svg>
                                            <input
                                                type="text"
                                                placeholder="Search products..."
                                                value={searchQuery}
                                                onChange={(e) => setSearchQuery(e.target.value)}
                                                className="bg-white border border-bella-200 text-navy placeholder-bella-400 pl-10 pr-4 py-2 rounded-lg text-sm w-48 focus:outline-none focus:border-gold focus:ring-1 focus:ring-gold/20"
                                            />
                                        </div>
                                        <select
                                            value={sortBy}
                                            onChange={(e) => setSortBy(e.target.value)}
                                            className="bg-white border border-bella-200 text-navy px-4 py-2 rounded-lg text-sm focus:outline-none focus:border-gold cursor-pointer"
                                        >
                                            <option value="featured">Featured</option>
                                            <option value="name">Name (A-Z)</option>
                                            <option value="price-low">Price: Low to High</option>
                                            <option value="price-high">Price: High to Low</option>
                                        </select>
                                    </div>
                                </div>

                                {/* Main Row: Illustration + Title | USPs */}
                                <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
                                    {/* Left Side: Illustration + Category Title */}
                                    <div className="flex items-center gap-5">
                                        {/* Line Art Illustration */}
                                        <div className="hidden md:flex w-20 h-20 rounded-2xl bg-white border border-bella-200 items-center justify-center p-3 shadow-sm">
                                            <div className="w-full h-full opacity-70">
                                                {getCategoryIllustration(selectedCategory.name)}
                                            </div>
                                        </div>
                                        {/* Title & Tagline */}
                                        <div>
                                            <h1 className="font-display text-3xl md:text-4xl font-bold text-navy tracking-tight">
                                                {selectedCategory.name}
                                            </h1>
                                            <p className="text-bella-500 mt-1 text-sm">{categoryTagline}</p>
                                        </div>
                                    </div>

                                    {/* Right Side: USPs with colorful icons */}
                                    <div className="flex flex-wrap items-center gap-4 lg:gap-6">
                                        {currentUSPs.map((usp, i) => {
                                            // Colorful icon backgrounds
                                            const iconColors = [
                                                'bg-gradient-to-br from-amber-400 to-amber-500',
                                                'bg-gradient-to-br from-emerald-400 to-emerald-500',
                                                'bg-gradient-to-br from-sky-400 to-sky-500'
                                            ];
                                            return (
                                                <div key={i} className="flex items-center gap-3">
                                                    <div className={`w-11 h-11 rounded-xl ${iconColors[i]} flex items-center justify-center shadow-md`}>
                                                        <svg className="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={usp.icon} />
                                                        </svg>
                                                    </div>
                                                    <div>
                                                        <h4 className="font-semibold text-navy text-sm leading-tight">{usp.title}</h4>
                                                        <p className="text-bella-500 text-xs">{usp.desc}</p>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="max-w-7xl mx-auto px-6 py-8">
                        <div className="flex gap-8">
                            {/* Sidebar - Always visible */}
                            <aside className="hidden lg:block w-64 flex-shrink-0">
                                <CategorySidebar
                                    categories={categories}
                                    selectedCategoryId={selectedCategoryId}
                                    onSelectCategory={(catId) => navigate('shop', catId ? { categoryId: catId } : {})}
                                />

                                {/* Price Filter - only show when category selected */}
                                {selectedCategory && (
                                    <div className="bg-white rounded-2xl p-6 mt-6">
                                        <h3 className="font-semibold text-navy mb-4">Price Range</h3>
                                        <input
                                            type="range"
                                            min="0"
                                            max="10000"
                                            value={priceRange[1]}
                                            onChange={(e) => setPriceRange([0, parseInt(e.target.value)])}
                                            className="w-full accent-gold"
                                        />
                                        <div className="flex justify-between text-sm text-bella-600 mt-2">
                                            <span>OMR {priceRange[0]}</span>
                                            <span>OMR {priceRange[1]}</span>
                                        </div>
                                    </div>
                                )}
                            </aside>

                            {/* Main Content Area */}
                            <main className="flex-1">
                                {/* Show Category Tiles when no category selected */}
                                {!selectedCategory && (
                                    <>
                                        {/* Breadcrumb */}
                                        <div className="flex items-center text-sm text-bella-600 mb-6">
                                            <span className="breadcrumb-item cursor-pointer hover:text-gold" onClick={() => navigate('home')}>Home</span>
                                            <span className="breadcrumb-item text-navy font-medium">Shop</span>
                                        </div>

                                        {/* Header */}
                                        <div className="mb-8">
                                            <h1 className="font-display text-4xl font-bold text-navy">{t('shopByCategory')}</h1>
                                            <p className="text-bella-600 mt-2">{t('exploreCollections')}</p>
                                        </div>

                                        {/* Category Tiles Grid - 8 categories max */}
                                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
                                            {categories
                                                .filter(cat => !cat.parentId) // Only root categories
                                                .sort((a, b) => (b.totalCount || b.count || 0) - (a.totalCount || a.count || 0))
                                                .slice(0, 8)
                                                .map(category => {
                                                    // Category image mapping based on name
                                                    const getCategoryImage = (catName) => {
                                                        const name = catName?.toLowerCase() || '';
                                                        const imageMap = {
                                                            'collections': 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&h=450&fit=crop',
                                                            'bathroom': 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=450&fit=crop',
                                                            'bath essentials': 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&h=450&fit=crop',
                                                            'washroom': 'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=600&h=450&fit=crop',
                                                            'washlet': 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&h=450&fit=crop',
                                                            'wellness': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                            'bath assist': 'https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=600&h=450&fit=crop',
                                                            'kitchen': 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=600&h=450&fit=crop',
                                                            'misc': 'https://images.unsplash.com/photo-1581876832484-c6a6a1aee755?w=600&h=450&fit=crop',
                                                            'water heaters': 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&h=450&fit=crop',
                                                            'switches': 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=600&h=450&fit=crop',
                                                        };
                                                        // Check for exact match first
                                                        if (imageMap[name]) return imageMap[name];
                                                        // Check for partial match
                                                        for (const [key, url] of Object.entries(imageMap)) {
                                                            if (name.includes(key) || key.includes(name)) return url;
                                                        }
                                                        // Fallback
                                                        return 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=450&fit=crop';
                                                    };
                                                    const categoryImage = getCategoryImage(category.name);

                                                    return (
                                                        <div
                                                            key={category.id}
                                                            onClick={() => navigate('shop', { categoryId: category.id })}
                                                            className="relative group cursor-pointer rounded-2xl overflow-hidden aspect-[4/3] transition-all duration-300 hover:scale-[1.02] hover:shadow-xl"
                                                        >
                                                            {/* Category Image */}
                                                            <img
                                                                src={categoryImage}
                                                                alt={category.name}
                                                                className="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                                                onError={(e) => {
                                                                    e.target.src = 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=400&fit=crop';
                                                                }}
                                                            />

                                                            {/* Dark overlay gradient */}
                                                            <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent" />

                                                            {/* Content */}
                                                            <div className="absolute bottom-0 left-0 right-0 p-4 md:p-5">
                                                                <h3 className="text-white font-display font-bold text-lg md:text-xl mb-1">{category.name}</h3>
                                                                <p className="text-white/80 text-sm">{category.totalCount || category.count || 0} {t('productsCount')}</p>
                                                            </div>
                                                        </div>
                                                    );
                                                })}
                                        </div>
                                    </>
                                )}

                                {/* Show Products when category is selected */}
                                {selectedCategory && (
                                    <>
                                        {/* Breadcrumb */}
                                        <div className="flex items-center text-sm text-bella-600 mb-6">
                                            <span className="breadcrumb-item cursor-pointer hover:text-gold" onClick={() => navigate('home')}>Home</span>
                                            <span className="breadcrumb-item cursor-pointer hover:text-gold" onClick={() => navigate('shop')}>Shop</span>
                                            <span className="breadcrumb-item text-navy font-medium">{selectedCategory.name}</span>
                                        </div>

                                        {/* Header - different for subcategories vs products */}
                                        <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
                                            <div>
                                                <h1 className="font-display text-3xl font-bold text-navy">{selectedCategory.name}</h1>
                                                <p className="text-bella-600 mt-1">
                                                    {hasSubcategories
                                                        ? `${subcategories.length} ${t('subcategoriesCount')}`
                                                        : `${filteredProducts.length} ${t('productsCount')}`
                                                    }
                                                </p>
                                            </div>
                                            {/* Only show filters when viewing products */}
                                            {!hasSubcategories && (
                                                <div className="flex items-center gap-4">
                                                    <input
                                                        type="text"
                                                        placeholder="Search products..."
                                                        value={searchQuery}
                                                        onChange={(e) => setSearchQuery(e.target.value)}
                                                        className="bg-white border border-bella-200 px-4 py-2 rounded-lg text-sm w-48"
                                                    />
                                                    <select
                                                        value={sortBy}
                                                        onChange={(e) => setSortBy(e.target.value)}
                                                        className="bg-white border border-bella-200 px-4 py-2 rounded-lg text-sm"
                                                    >
                                                        <option value="featured">Featured</option>
                                                        <option value="name">Name (A-Z)</option>
                                                        <option value="price-low">Price: Low to High</option>
                                                        <option value="price-high">Price: High to Low</option>
                                                    </select>
                                                </div>
                                            )}
                                        </div>

                                        {/* Show Subcategory Tiles if category has children */}
                                        {hasSubcategories ? (
                                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
                                                {subcategories
                                                    .sort((a, b) => (b.totalCount || b.count || 0) - (a.totalCount || a.count || 0))
                                                    .map(subcat => {
                                                        // Subcategory image mapping based on name
                                                        const getSubcatImage = (catName) => {
                                                            const name = catName?.toLowerCase() || '';
                                                            const imageMap = {
                                                                // Bathroom related
                                                                'shower': 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&h=450&fit=crop',
                                                                'faucet': 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&h=450&fit=crop',
                                                                'mixer': 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&h=450&fit=crop',
                                                                'basin': 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=450&fit=crop',
                                                                'toilet': 'https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=600&h=450&fit=crop',
                                                                'bathtub': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                                'jacuzzi': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                                'drain': 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&h=450&fit=crop',
                                                                'valve': 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&h=450&fit=crop',
                                                                'accessory': 'https://images.unsplash.com/photo-1581876832484-c6a6a1aee755?w=600&h=450&fit=crop',
                                                                'tap': 'https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=600&h=450&fit=crop',
                                                                'sink': 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=600&h=450&fit=crop',
                                                                'concealed': 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=600&h=450&fit=crop',
                                                                'vanity': 'https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=600&h=450&fit=crop',
                                                                'cabinet': 'https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=600&h=450&fit=crop',
                                                                'mirror': 'https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=600&h=450&fit=crop',
                                                                'heater': 'https://images.unsplash.com/photo-1585128792020-803d29415281?w=600&h=450&fit=crop',
                                                                'wellness': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                                'spa': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                                'sauna': 'https://images.unsplash.com/photo-1540518614846-7eded433c457?w=600&h=450&fit=crop',
                                                            };
                                                            for (const [key, url] of Object.entries(imageMap)) {
                                                                if (name.includes(key)) return url;
                                                            }
                                                            return 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=450&fit=crop';
                                                        };
                                                        const subcatImage = getSubcatImage(subcat.name);

                                                        return (
                                                            <div
                                                                key={subcat.id}
                                                                onClick={() => navigate('shop', { categoryId: subcat.id })}
                                                                className="relative group cursor-pointer rounded-2xl overflow-hidden aspect-[4/3] transition-all duration-300 hover:scale-[1.02] hover:shadow-xl"
                                                            >
                                                                {/* Subcategory Image */}
                                                                <img
                                                                    src={subcatImage}
                                                                    alt={subcat.name}
                                                                    className="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                                                                    onError={(e) => {
                                                                        e.target.src = 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=600&h=400&fit=crop';
                                                                    }}
                                                                />

                                                                {/* Dark overlay gradient */}
                                                                <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent" />

                                                                {/* Content */}
                                                                <div className="absolute bottom-0 left-0 right-0 p-4 md:p-5">
                                                                    <h3 className="text-white font-display font-bold text-lg md:text-xl mb-1">{subcat.name}</h3>
                                                                    <p className="text-white/80 text-sm">{subcat.totalCount || subcat.count || 0} {t('productsCount')}</p>
                                                                </div>
                                                            </div>
                                                        );
                                                    })}
                                            </div>
                                        ) : (
                                            <>
                                                {/* Products Grid - only show when no subcategories */}
                                                {loading ? (
                                                    <div className="flex items-center justify-center h-96">
                                                        <div className="loader" />
                                                    </div>
                                                ) : (
                                                    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
                                                        {filteredProducts.map(product => (
                                                            <ProductCard
                                                                key={product.id}
                                                                product={product}
                                                                onClick={() => handleProductClick(product)}
                                                            />
                                                        ))}
                                                    </div>
                                                )}

                                                {!loading && filteredProducts.length === 0 && (
                                                    <div className="text-center py-16">
                                                        <p className="text-bella-600 text-lg">No products found.</p>
                                                        <button
                                                            onClick={() => { setSearchQuery(''); setPriceRange([0, 10000]); }}
                                                            className="mt-4 text-gold font-medium hover:underline"
                                                        >
                                                            Clear filters
                                                        </button>
                                                    </div>
                                                )}
                                            </>
                                        )}
                                    </>
                                )}
                            </main>
                        </div>
                    </div>
                </div>
            );
        };

        // ============================================
        // PRODUCT DETAIL PAGE
        // ============================================
        const ProductDetailPage = ({ productSlug, navigate, categories }) => {
            const [product, setProduct] = useState(null);
            const [loading, setLoading] = useState(true);
            const [selectedImageIndex, setSelectedImageIndex] = useState(0);
            const [quantity, setQuantity] = useState(1);
            const { addToCart } = useCart();
            const { toggleWishlist, isInWishlist } = useWishlist();
            const { t, countryConfig, formatPrice } = useLocale();

            useEffect(() => {
                const loadProduct = async () => {
                    setLoading(true);
                    const data = await OdooAPI.fetchProductBySlug(productSlug);
                    setProduct(data);
                    setSelectedImageIndex(0);
                    setLoading(false);
                };
                loadProduct();
            }, [productSlug]);

            if (loading) {
                return (
                    <div className="page active pt-24">
                        <div className="max-w-7xl mx-auto px-6 py-12 flex items-center justify-center h-96">
                            <div className="loader" />
                        </div>
                    </div>
                );
            }

            if (!product) {
                return (
                    <div className="page active pt-24">
                        <div className="max-w-7xl mx-auto px-6 py-12 text-center">
                            <h1 className="text-2xl font-display font-bold text-navy">Product Not Found</h1>
                            <button onClick={() => navigate('shop')} className="mt-6 bg-gold text-white px-6 py-3 rounded-xl">
                                Back to Shop
                            </button>
                        </div>
                    </div>
                );
            }

            // Build images array
            const allImages = [{ url: product.image, name: product.name }];
            if (product.additionalImages?.length > 0) {
                product.additionalImages.forEach(img => allImages.push({ url: img.url, name: img.name || product.name }));
            }

            // Build category breadcrumb path
            const buildCategoryPath = () => {
                if (!product.publicCategoryIds || product.publicCategoryIds.length === 0) return [];

                // Get the first public category of this product
                const productCategoryId = product.publicCategoryIds[0];
                const productCategory = categories.find(c => c.id === productCategoryId);
                if (!productCategory) return [];

                // Build path from root to this category
                const path = [];
                let current = productCategory;
                while (current) {
                    path.unshift(current);
                    current = current.parentId ? categories.find(c => c.id === current.parentId) : null;
                }
                return path;
            };

            const categoryPath = buildCategoryPath();

            return (
                <div className="page active pt-20">
                    <div className="max-w-7xl mx-auto px-4 md:px-6 py-3 md:py-4">
                        {/* Breadcrumb with full category path */}
                        <div className="flex items-center flex-wrap text-xs text-bella-600 mb-3">
                            <span className="breadcrumb-item cursor-pointer hover:text-gold" onClick={() => navigate('home')}>Home</span>
                            <span className="breadcrumb-item cursor-pointer hover:text-gold" onClick={() => navigate('shop')}>Shop</span>
                            {categoryPath.map(cat => (
                                <span
                                    key={cat.id}
                                    className="breadcrumb-item cursor-pointer hover:text-gold"
                                    onClick={() => navigate('shop', { categoryId: cat.id })}
                                >
                                    {cat.name}
                                </span>
                            ))}
                            <span className="breadcrumb-item text-navy font-medium truncate max-w-[250px] lg:max-w-[400px]">{product.name}</span>
                        </div>

                        <div className="grid lg:grid-cols-2 gap-6 lg:gap-12">
                            {/* Images */}
                            <div>
                                <div className="bg-white rounded-xl md:rounded-2xl overflow-hidden mb-3 md:mb-4 relative">
                                    {product.ribbonName && (
                                        <div className="ribbon-badge bg-red-500 text-white px-3 py-1.5 md:px-4 md:py-2 rounded-lg text-xs md:text-sm font-bold uppercase">
                                            {product.ribbonName}
                                        </div>
                                    )}
                                    <img
                                        src={allImages[selectedImageIndex]?.url || product.image}
                                        alt={product.name}
                                        className="w-full h-64 sm:h-80 md:h-96 lg:h-[500px] object-contain"
                                    />
                                </div>
                                {allImages.length > 1 && (
                                    <div className="flex gap-2 md:gap-3 overflow-x-auto pb-2">
                                        {allImages.map((img, index) => (
                                            <button
                                                key={index}
                                                onClick={() => setSelectedImageIndex(index)}
                                                className={`thumbnail-item flex-shrink-0 w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden ${selectedImageIndex === index ? 'active' : ''}`}
                                            >
                                                <img src={img.url} alt={img.name} className="w-full h-full object-cover" />
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* Info */}
                            <div>
                                {/* Product Name - smaller font */}
                                <h1 className="font-display text-lg md:text-xl lg:text-2xl font-bold text-navy leading-tight">{product.name}</h1>

                                {/* SKU - above description */}
                                {product.sku && <p className="text-bella-500 mt-1 text-xs">SKU: {product.sku}</p>}

                                {/* Description - above price/cart */}
                                {product.ecommerceDescription && (
                                    <div className="mt-2 text-bella-600 prose prose-sm max-w-none text-sm" dangerouslySetInnerHTML={{ __html: product.ecommerceDescription }} />
                                )}
                                {!product.ecommerceDescription && product.description && (
                                    <p className="mt-2 text-bella-600 leading-relaxed text-sm">{product.description}</p>
                                )}

                                {/* Price and Stock - inline */}
                                <div className="mt-3 flex items-center gap-4">
                                    <p className="text-xl md:text-2xl font-bold text-navy">{countryConfig.currencySymbol} {formatPrice(product.price)}</p>
                                    <p className={`text-sm ${product.inStock ? 'text-green-600' : 'text-red-600'}`}>
                                        {product.inStock ? `âœ“ ${t('inStock')}` : `âœ— ${t('outOfStock')}`}
                                    </p>
                                </div>

                                {/* Compact Add to Cart Row */}
                                <div className="mt-3 flex items-center gap-2">
                                    {/* Compact Quantity */}
                                    <div className="flex items-center border border-bella-300 rounded-lg bg-white overflow-hidden">
                                        <button onClick={() => setQuantity(Math.max(1, quantity - 1))} className="px-2 py-1.5 hover:bg-bella-100 font-bold text-navy text-sm">âˆ’</button>
                                        <span className="px-3 py-1.5 border-x border-bella-300 font-medium text-navy min-w-[32px] text-center text-sm">{quantity}</span>
                                        <button onClick={() => setQuantity(quantity + 1)} className="px-2 py-1.5 hover:bg-bella-100 font-bold text-navy text-sm">+</button>
                                    </div>

                                    {/* Icon-only Add to Cart */}
                                    <button
                                        className="p-2.5 rounded-lg flex items-center justify-center transition-all"
                                        style={{ backgroundColor: '#b8860b', color: 'white' }}
                                        onClick={(e) => {
                                            addToCart(product, quantity);
                                            const btn = e.currentTarget;
                                            btn.style.backgroundColor = '#16a34a';
                                            setTimeout(() => {
                                                btn.style.backgroundColor = '#b8860b';
                                            }, 1500);
                                        }}
                                        title={t('addToCart')}
                                    >
                                        <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                    </button>

                                    {/* Wishlist */}
                                    <button
                                        className="p-2.5 rounded-lg transition-all border"
                                        style={{
                                            backgroundColor: isInWishlist(product.id) ? '#fef2f2' : 'white',
                                            borderColor: isInWishlist(product.id) ? '#f87171' : '#e5e7eb'
                                        }}
                                        onClick={() => toggleWishlist(product)}
                                        title={isInWishlist(product.id) ? 'Remove from Wishlist' : 'Add to Wishlist'}
                                    >
                                        <svg
                                            className="w-5 h-5"
                                            fill={isInWishlist(product.id) ? '#ef4444' : 'none'}
                                            stroke={isInWishlist(product.id) ? '#ef4444' : '#6b7280'}
                                            strokeWidth="2"
                                            viewBox="0 0 24 24"
                                        >
                                            <path strokeLinecap="round" strokeLinejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                        </svg>
                                    </button>
                                </div>

                                {/* Documents */}
                                {product.documents?.length > 0 && (
                                    <div className="mt-8 pt-6 border-t border-bella-200">
                                        <h3 className="font-semibold text-navy mb-3">Downloads</h3>
                                        <div className="space-y-2">
                                            {product.documents.map((doc, i) => (
                                                <a key={i} href={doc.url} target="_blank" rel="noopener noreferrer" className="flex items-center gap-3 p-3 bg-bella-50 rounded-lg hover:bg-bella-100">
                                                    <svg className="w-5 h-5 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                    </svg>
                                                    <span className="text-sm text-bella-700">{doc.name}</span>
                                                </a>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Accessory Products */}
                        {product.accessoryProducts?.length > 0 && (
                            <div className="mt-16">
                                <h2 className="font-display text-2xl font-bold text-navy mb-6">Accessories</h2>
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-5">
                                    {product.accessoryProducts.map(acc => (
                                        <div key={acc.id} className="product-card bg-white rounded-xl overflow-hidden cursor-pointer" onClick={() => navigate('product', { slug: acc.slug })}>
                                            <div className="h-36 bg-bella-100">
                                                <img src={acc.thumbnail} alt={acc.name} className="w-full h-full object-cover" />
                                            </div>
                                            <div className="p-3">
                                                <h3 className="font-medium text-navy text-sm line-clamp-2">{acc.name}</h3>
                                                <p className="text-gold font-semibold mt-1">OMR {acc.price}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* Alternative Products */}
                        {product.alternativeProducts?.length > 0 && (
                            <div className="mt-16">
                                <h2 className="font-display text-2xl font-bold text-navy mb-6">You May Also Like</h2>
                                <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-5">
                                    {product.alternativeProducts.map(alt => (
                                        <div key={alt.id} className="product-card bg-white rounded-xl overflow-hidden cursor-pointer" onClick={() => navigate('product', { slug: alt.slug })}>
                                            <div className="h-36 bg-bella-100">
                                                <img src={alt.thumbnail} alt={alt.name} className="w-full h-full object-cover" />
                                            </div>
                                            <div className="p-3">
                                                <h3 className="font-medium text-navy text-sm line-clamp-2">{alt.name}</h3>
                                                <p className="text-gold font-semibold mt-1">OMR {alt.price}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // ============================================
        // ABOUT PAGE
        // ============================================
        const AboutPage = ({ navigate }) => (
            <div className="page active">
                <section className="bg-navy py-24">
                    <div className="max-w-4xl mx-auto px-6 text-center">
                        <p className="text-gold-light font-body tracking-[0.3em] text-sm mb-4">OUR STORY</p>
                        <h1 className="font-display text-5xl font-bold text-white">About Bella Bathwares</h1>
                    </div>
                </section>

                <section className="py-20">
                    <div className="max-w-7xl mx-auto px-6">
                        <div className="grid md:grid-cols-2 gap-16 items-center">
                            <div>
                                <img src="https://erp.bellastore.in/web/image/230968-1bf5481b/Bella%20Jacuzzi.jpg" alt="Our Story" className="rounded-3xl shadow-xl" />
                            </div>
                            <div>
                                <h2 className="font-display text-3xl font-bold text-navy mb-6">Luxury Lives & Luxury Tales</h2>
                                <p className="text-bella-700 leading-relaxed mb-4">
                                    Bella Group offers a curated range of bathware products, combining both functionality and elegance. From the moment we started, our mission has been to bring world-class bathroom solutions to discerning homeowners.
                                </p>
                                <p className="text-bella-700 leading-relaxed">
                                    We believe that your bathroom should be a sanctuary â€“ a place where luxury meets everyday life.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <section className="py-16 bg-bella-50">
                    <div className="max-w-7xl mx-auto px-6">
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                            {[
                                { value: '15+', label: 'Years Experience' },
                                { value: '1000+', label: 'Products' },
                                { value: '50K+', label: 'Happy Customers' },
                                { value: '100+', label: 'Brand Partners' }
                            ].map((stat, i) => (
                                <div key={i}>
                                    <p className="font-display text-5xl font-bold text-gold">{stat.value}</p>
                                    <p className="text-bella-600 mt-2">{stat.label}</p>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            </div>
        );

        // ============================================
        // CONTACT PAGE
        // ============================================
        const ContactPage = ({ navigate }) => {
            const [formData, setFormData] = useState({ name: '', email: '', phone: '', message: '' });
            const [submitted, setSubmitted] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                setSubmitted(true);
            };

            return (
                <div className="page active">
                    <section className="bg-navy py-24">
                        <div className="max-w-4xl mx-auto px-6 text-center">
                            <p className="text-gold-light font-body tracking-[0.3em] text-sm mb-4">GET IN TOUCH</p>
                            <h1 className="font-display text-5xl font-bold text-white">Contact Us</h1>
                        </div>
                    </section>

                    <section className="py-20">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="grid md:grid-cols-2 gap-16">
                                <div className="bg-white rounded-3xl p-8 shadow-lg">
                                    {submitted ? (
                                        <div className="text-center py-12">
                                            <div className="text-6xl mb-4">âœ…</div>
                                            <h3 className="font-display text-2xl font-bold text-navy mb-2">Thank You!</h3>
                                            <p className="text-bella-600">We'll get back to you within 24 hours.</p>
                                        </div>
                                    ) : (
                                        <form onSubmit={handleSubmit}>
                                            <div className="space-y-6">
                                                <div>
                                                    <label className="block text-sm font-medium text-navy mb-2">Full Name</label>
                                                    <input type="text" required value={formData.name} onChange={(e) => setFormData({...formData, name: e.target.value})} className="w-full px-4 py-3 border border-bella-200 rounded-xl focus:outline-none focus:border-gold" />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-navy mb-2">Email</label>
                                                    <input type="email" required value={formData.email} onChange={(e) => setFormData({...formData, email: e.target.value})} className="w-full px-4 py-3 border border-bella-200 rounded-xl focus:outline-none focus:border-gold" />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-navy mb-2">Phone</label>
                                                    <input type="tel" value={formData.phone} onChange={(e) => setFormData({...formData, phone: e.target.value})} className="w-full px-4 py-3 border border-bella-200 rounded-xl focus:outline-none focus:border-gold" />
                                                </div>
                                                <div>
                                                    <label className="block text-sm font-medium text-navy mb-2">Message</label>
                                                    <textarea required rows={4} value={formData.message} onChange={(e) => setFormData({...formData, message: e.target.value})} className="w-full px-4 py-3 border border-bella-200 rounded-xl focus:outline-none focus:border-gold resize-none" />
                                                </div>
                                                <button type="submit" className="w-full bg-gold hover:bg-gold-dark text-white py-4 rounded-xl font-semibold transition-colors">
                                                    Send Message
                                                </button>
                                            </div>
                                        </form>
                                    )}
                                </div>

                                <div className="space-y-8">
                                    {[
                                        { icon: 'ðŸ“', title: 'Visit Our Showroom', info: 'Bella Water Studio\nMuscat, Oman' },
                                        { icon: 'ðŸ“ž', title: 'Call Us', info: '+968 XXXX XXXX\nSat - Thu: 9AM - 6PM' },
                                        { icon: 'âœ‰ï¸', title: 'Email Us', info: 'info@bellabathwares.com' }
                                    ].map((item, i) => (
                                        <div key={i} className="flex gap-4">
                                            <div className="text-4xl">{item.icon}</div>
                                            <div>
                                                <h3 className="font-semibold text-navy mb-1">{item.title}</h3>
                                                <p className="text-bella-600 whitespace-pre-line">{item.info}</p>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // CART PAGE
        // ============================================
        const CartPage = ({ navigate }) => {
            const { cart, removeFromCart, updateQuantity, clearCart, cartTotal } = useCart();
            const { addToWishlist, isInWishlist } = useWishlist();
            const { countryConfig, formatPrice } = useLocale();

            const moveToWishlist = (item) => {
                addToWishlist(item);
                removeFromCart(item.id);
            };

            return (
                <div className="page active">
                    <section className="bg-gradient-to-r from-bella-50 via-white to-bella-50 py-12 border-b border-bella-100">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="flex items-center text-sm text-bella-500 mb-4">
                                <span className="cursor-pointer hover:text-navy" onClick={() => navigate('home')}>Home</span>
                                <span className="mx-2">/</span>
                                <span className="text-navy font-medium">Shopping Cart</span>
                            </div>
                            <h1 className="font-display text-3xl md:text-4xl font-bold text-navy">Your Cart</h1>
                            <p className="text-bella-500 mt-2">{cart.length} {cart.length === 1 ? 'item' : 'items'} in your cart</p>
                        </div>
                    </section>

                    <section className="py-12">
                        <div className="max-w-7xl mx-auto px-6">
                            {cart.length === 0 ? (
                                <div className="text-center py-16">
                                    <div className="w-24 h-24 mx-auto bg-bella-100 rounded-full flex items-center justify-center mb-6">
                                        <svg className="w-12 h-12 text-bella-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                                        </svg>
                                    </div>
                                    <h2 className="font-display text-2xl font-bold text-navy mb-2">Your cart is empty</h2>
                                    <p className="text-bella-600 mb-6">Looks like you haven't added anything to your cart yet.</p>
                                    <button onClick={() => navigate('shop')} className="bg-gold hover:bg-gold-dark text-white px-8 py-3 rounded-xl font-semibold transition-colors">
                                        Continue Shopping
                                    </button>
                                </div>
                            ) : (
                                <div className="grid lg:grid-cols-3 gap-8">
                                    {/* Cart Items */}
                                    <div className="lg:col-span-2 space-y-4">
                                        {cart.map(item => (
                                            <div key={item.id} className="bg-white rounded-2xl p-4 flex gap-4 shadow-sm">
                                                <img
                                                    src={item.thumbnail || item.image}
                                                    alt={item.name}
                                                    className="w-24 h-24 object-cover rounded-xl cursor-pointer"
                                                    onClick={() => navigate('product', { slug: item.slug })}
                                                />
                                                <div className="flex-1">
                                                    <h3 className="font-semibold text-navy cursor-pointer hover:text-gold" onClick={() => navigate('product', { slug: item.slug })}>{item.name}</h3>
                                                    <p className="text-bella-500 text-sm">{item.category}</p>
                                                    <p className="text-lg font-bold text-navy mt-1">{countryConfig.currencySymbol} {formatPrice(item.price)}</p>

                                                    <div className="flex items-center gap-4 mt-3">
                                                        <div className="flex items-center border border-bella-200 rounded-lg">
                                                            <button onClick={() => updateQuantity(item.id, item.quantity - 1)} className="px-3 py-1 hover:bg-bella-100">-</button>
                                                            <span className="px-3 py-1 border-x border-bella-200">{item.quantity}</span>
                                                            <button onClick={() => updateQuantity(item.id, item.quantity + 1)} className="px-3 py-1 hover:bg-bella-100">+</button>
                                                        </div>
                                                        <button onClick={() => moveToWishlist(item)} className="text-bella-500 hover:text-gold text-sm flex items-center gap-1">
                                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                                            </svg>
                                                            Save
                                                        </button>
                                                        <button onClick={() => removeFromCart(item.id)} className="text-red-500 hover:text-red-600 text-sm flex items-center gap-1">
                                                            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                            </svg>
                                                            Remove
                                                        </button>
                                                    </div>
                                                </div>
                                                <div className="text-right">
                                                    <p className="font-bold text-navy">{countryConfig.currencySymbol} {formatPrice(item.price * item.quantity)}</p>
                                                </div>
                                            </div>
                                        ))}

                                        <button onClick={clearCart} className="text-bella-500 hover:text-red-500 text-sm mt-4">
                                            Clear entire cart
                                        </button>
                                    </div>

                                    {/* Order Summary */}
                                    <div className="lg:col-span-1">
                                        <div className="bg-white rounded-2xl p-6 shadow-sm sticky top-28">
                                            <h3 className="font-display text-xl font-bold text-navy mb-4">Order Summary</h3>

                                            <div className="space-y-3 border-b border-bella-100 pb-4 mb-4">
                                                <div className="flex justify-between text-bella-600">
                                                    <span>Subtotal</span>
                                                    <span>{countryConfig.currencySymbol} {formatPrice(cartTotal)}</span>
                                                </div>
                                                <div className="flex justify-between text-bella-600">
                                                    <span>Shipping</span>
                                                    <span className="text-green-600">Free</span>
                                                </div>
                                            </div>

                                            <div className="flex justify-between text-lg font-bold text-navy mb-6">
                                                <span>Total</span>
                                                <span>{countryConfig.currencySymbol} {formatPrice(cartTotal)}</span>
                                            </div>

                                            <button
                                                onClick={() => navigate('checkout')}
                                                className="w-full bg-gold hover:bg-gold-dark text-white py-4 rounded-xl font-semibold transition-colors mb-3"
                                            >
                                                Proceed to Checkout
                                            </button>

                                            <button onClick={() => navigate('shop')} className="w-full border border-bella-200 text-navy py-3 rounded-xl font-medium hover:bg-bella-50 transition-colors">
                                                Continue Shopping
                                            </button>

                                            <div className="mt-6 pt-4 border-t border-bella-100">
                                                <div className="flex items-center gap-2 text-bella-500 text-sm">
                                                    <svg className="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                                                    </svg>
                                                    Secure checkout
                                                </div>
                                                <div className="flex items-center gap-2 text-bella-500 text-sm mt-2">
                                                    <svg className="w-5 h-5 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" />
                                                    </svg>
                                                    Free delivery over OMR 50
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // CHECKOUT PAGE
        // ============================================
        const CheckoutPage = ({ navigate }) => {
            const { cart, clearCart, cartTotal } = useCart();
            const { countryConfig, formatPrice, country } = useLocale();
            const [step, setStep] = useState('form'); // 'form', 'processing', 'success', 'error'
            const [customerData, setCustomerData] = useState({
                name: '',
                phone: '',
                email: ''
            });
            const [errors, setErrors] = useState({});
            const [orderInfo, setOrderInfo] = useState(null);
            const [errorMessage, setErrorMessage] = useState('');

            // Redirect to cart if empty
            useEffect(() => {
                if (cart.length === 0 && step === 'form') {
                    navigate('cart');
                }
            }, [cart, step, navigate]);

            const validateForm = () => {
                const newErrors = {};
                if (!customerData.name.trim()) {
                    newErrors.name = 'Name is required';
                }
                if (!customerData.phone.trim()) {
                    newErrors.phone = 'Phone number is required';
                } else if (!/^[\d\s+()-]{8,}$/.test(customerData.phone)) {
                    newErrors.phone = 'Please enter a valid phone number';
                }
                if (customerData.email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(customerData.email)) {
                    newErrors.email = 'Please enter a valid email address';
                }
                setErrors(newErrors);
                return Object.keys(newErrors).length === 0;
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!validateForm()) return;

                setStep('processing');

                try {
                    // For Oman, use Thawani payment
                    if (country === 'OM') {
                        const response = await fetch(`${ODOO_CONFIG.proxyUrl}/api/checkout/create-session`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                customer: customerData,
                                cart: cart.map(item => ({
                                    id: item.id,
                                    name: item.name,
                                    price: item.price,
                                    quantity: item.quantity
                                })),
                                successUrl: `${window.location.origin}/#checkout-success`,
                                cancelUrl: `${window.location.origin}/#checkout-cancel`
                            })
                        });

                        const data = await response.json();

                        if (data.success && data.checkoutUrl) {
                            // Store order info for success page
                            localStorage.setItem('pendingOrder', JSON.stringify({
                                orderRef: data.orderRef,
                                sessionId: data.sessionId,
                                odooOrderName: data.odooOrderName
                            }));
                            // Redirect to Thawani payment page
                            window.location.href = data.checkoutUrl;
                        } else {
                            throw new Error(data.error || 'Failed to create checkout session');
                        }
                    } else {
                        // For other countries, create order without payment (COD or quote request)
                        const response = await fetch(`${ODOO_CONFIG.proxyUrl}/api/checkout/create-session`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                customer: customerData,
                                cart: cart.map(item => ({
                                    id: item.id,
                                    name: item.name,
                                    price: item.price,
                                    quantity: item.quantity
                                })),
                                skipPayment: true
                            })
                        });

                        const data = await response.json();

                        if (data.success || data.odooOrderName) {
                            setOrderInfo({
                                orderName: data.odooOrderName,
                                orderRef: data.orderRef
                            });
                            clearCart();
                            setStep('success');
                        } else {
                            throw new Error(data.error || 'Failed to create order');
                        }
                    }
                } catch (error) {
                    console.error('Checkout error:', error);
                    setErrorMessage(error.message || 'Something went wrong. Please try again.');
                    setStep('error');
                }
            };

            // Success state
            if (step === 'success') {
                return (
                    <div className="page active">
                        <section className="py-20">
                            <div className="max-w-lg mx-auto px-6 text-center">
                                <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                    </svg>
                                </div>
                                <h1 className="font-display text-3xl font-bold text-navy mb-4">Order Submitted!</h1>
                                <p className="text-bella-600 mb-2">Thank you for your order.</p>
                                {orderInfo?.orderName && (
                                    <p className="text-lg font-semibold text-navy mb-6">
                                        Order Number: {orderInfo.orderName}
                                    </p>
                                )}
                                <p className="text-bella-500 mb-8">
                                    Our team will contact you shortly to confirm your order and arrange delivery.
                                </p>
                                <button
                                    onClick={() => navigate('home')}
                                    className="bg-gold hover:bg-gold-dark text-white px-8 py-3 rounded-xl font-semibold transition-colors"
                                >
                                    Continue Shopping
                                </button>
                            </div>
                        </section>
                    </div>
                );
            }

            // Error state
            if (step === 'error') {
                return (
                    <div className="page active">
                        <section className="py-20">
                            <div className="max-w-lg mx-auto px-6 text-center">
                                <div className="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-10 h-10 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </div>
                                <h1 className="font-display text-3xl font-bold text-navy mb-4">Checkout Failed</h1>
                                <p className="text-bella-600 mb-6">{errorMessage}</p>
                                <div className="flex gap-4 justify-center">
                                    <button
                                        onClick={() => setStep('form')}
                                        className="bg-gold hover:bg-gold-dark text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                                    >
                                        Try Again
                                    </button>
                                    <button
                                        onClick={() => navigate('cart')}
                                        className="border border-bella-200 text-navy px-6 py-3 rounded-xl font-medium hover:bg-bella-50 transition-colors"
                                    >
                                        Back to Cart
                                    </button>
                                </div>
                            </div>
                        </section>
                    </div>
                );
            }

            // Processing state
            if (step === 'processing') {
                return (
                    <div className="page active">
                        <section className="py-20">
                            <div className="max-w-lg mx-auto px-6 text-center">
                                <div className="w-20 h-20 bg-bella-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
                                    <svg className="w-10 h-10 text-gold animate-spin" fill="none" viewBox="0 0 24 24">
                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                </div>
                                <h1 className="font-display text-2xl font-bold text-navy mb-4">Processing your order...</h1>
                                <p className="text-bella-600">Please wait while we prepare your checkout.</p>
                            </div>
                        </section>
                    </div>
                );
            }

            // Form state
            return (
                <div className="page active">
                    <section className="bg-gradient-to-r from-bella-50 via-white to-bella-50 py-12 border-b border-bella-100">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="flex items-center text-sm text-bella-500 mb-4">
                                <span className="cursor-pointer hover:text-navy" onClick={() => navigate('home')}>Home</span>
                                <span className="mx-2">/</span>
                                <span className="cursor-pointer hover:text-navy" onClick={() => navigate('cart')}>Cart</span>
                                <span className="mx-2">/</span>
                                <span className="text-navy font-medium">Checkout</span>
                            </div>
                            <h1 className="font-display text-3xl md:text-4xl font-bold text-navy">Checkout</h1>
                        </div>
                    </section>

                    <section className="py-12">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="grid lg:grid-cols-3 gap-8">
                                {/* Customer Information Form */}
                                <div className="lg:col-span-2">
                                    <div className="bg-white rounded-2xl p-6 shadow-sm">
                                        <h2 className="font-display text-xl font-bold text-navy mb-6">Contact Information</h2>

                                        <form onSubmit={handleSubmit} className="space-y-5">
                                            {/* Name */}
                                            <div>
                                                <label className="block text-sm font-medium text-navy mb-2">
                                                    Full Name <span className="text-red-500">*</span>
                                                </label>
                                                <input
                                                    type="text"
                                                    value={customerData.name}
                                                    onChange={(e) => setCustomerData({...customerData, name: e.target.value})}
                                                    className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-gold/50 ${
                                                        errors.name ? 'border-red-500' : 'border-bella-200'
                                                    }`}
                                                    placeholder="Enter your full name"
                                                />
                                                {errors.name && <p className="text-red-500 text-sm mt-1">{errors.name}</p>}
                                            </div>

                                            {/* Phone */}
                                            <div>
                                                <label className="block text-sm font-medium text-navy mb-2">
                                                    Phone Number <span className="text-red-500">*</span>
                                                </label>
                                                <input
                                                    type="tel"
                                                    value={customerData.phone}
                                                    onChange={(e) => setCustomerData({...customerData, phone: e.target.value})}
                                                    className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-gold/50 ${
                                                        errors.phone ? 'border-red-500' : 'border-bella-200'
                                                    }`}
                                                    placeholder="+968 9XXX XXXX"
                                                />
                                                {errors.phone && <p className="text-red-500 text-sm mt-1">{errors.phone}</p>}
                                            </div>

                                            {/* Email */}
                                            <div>
                                                <label className="block text-sm font-medium text-navy mb-2">
                                                    Email Address <span className="text-bella-400">(Optional)</span>
                                                </label>
                                                <input
                                                    type="email"
                                                    value={customerData.email}
                                                    onChange={(e) => setCustomerData({...customerData, email: e.target.value})}
                                                    className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-gold/50 ${
                                                        errors.email ? 'border-red-500' : 'border-bella-200'
                                                    }`}
                                                    placeholder="your@email.com"
                                                />
                                                {errors.email && <p className="text-red-500 text-sm mt-1">{errors.email}</p>}
                                                <p className="text-bella-500 text-xs mt-1">We'll send order confirmation to this email</p>
                                            </div>

                                            {/* Payment Method Info */}
                                            <div className="pt-4 border-t border-bella-100">
                                                <h3 className="font-semibold text-navy mb-3">Payment Method</h3>
                                                {country === 'OM' ? (
                                                    <div className="flex items-center gap-3 p-4 bg-bella-50 rounded-xl">
                                                        <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm">
                                                            <svg className="w-8 h-8 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <p className="font-medium text-navy">Secure Online Payment</p>
                                                            <p className="text-sm text-bella-500">Pay securely with Thawani (Cards, OmanNet)</p>
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <div className="flex items-center gap-3 p-4 bg-bella-50 rounded-xl">
                                                        <div className="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm">
                                                            <svg className="w-8 h-8 text-gold" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                                            </svg>
                                                        </div>
                                                        <div>
                                                            <p className="font-medium text-navy">Request Quote</p>
                                                            <p className="text-sm text-bella-500">Our team will contact you with pricing and payment options</p>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>

                                            <button
                                                type="submit"
                                                className="w-full bg-gold hover:bg-gold-dark text-white py-4 rounded-xl font-semibold transition-colors mt-6"
                                            >
                                                {country === 'OM' ? 'Proceed to Payment' : 'Submit Order'}
                                            </button>
                                        </form>
                                    </div>
                                </div>

                                {/* Order Summary */}
                                <div className="lg:col-span-1">
                                    <div className="bg-white rounded-2xl p-6 shadow-sm sticky top-28">
                                        <h3 className="font-display text-xl font-bold text-navy mb-4">Order Summary</h3>

                                        {/* Cart Items */}
                                        <div className="space-y-3 max-h-64 overflow-y-auto mb-4">
                                            {cart.map(item => (
                                                <div key={item.id} className="flex gap-3">
                                                    <img
                                                        src={item.thumbnail || item.image}
                                                        alt={item.name}
                                                        className="w-16 h-16 object-cover rounded-lg"
                                                    />
                                                    <div className="flex-1 min-w-0">
                                                        <p className="text-sm font-medium text-navy truncate">{item.name}</p>
                                                        <p className="text-xs text-bella-500">Qty: {item.quantity}</p>
                                                        <p className="text-sm font-semibold text-navy">
                                                            {countryConfig.currencySymbol} {formatPrice(item.price * item.quantity)}
                                                        </p>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <div className="border-t border-bella-100 pt-4 space-y-2">
                                            <div className="flex justify-between text-bella-600">
                                                <span>Subtotal</span>
                                                <span>{countryConfig.currencySymbol} {formatPrice(cartTotal)}</span>
                                            </div>
                                            <div className="flex justify-between text-bella-600">
                                                <span>Shipping</span>
                                                <span className="text-green-600">Free</span>
                                            </div>
                                        </div>

                                        <div className="flex justify-between text-lg font-bold text-navy mt-4 pt-4 border-t border-bella-100">
                                            <span>Total</span>
                                            <span>{countryConfig.currencySymbol} {formatPrice(cartTotal)}</span>
                                        </div>

                                        <button
                                            onClick={() => navigate('cart')}
                                            className="w-full text-center text-sm text-bella-500 hover:text-navy mt-4"
                                        >
                                            Edit Cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // CHECKOUT SUCCESS PAGE (for return from Thawani)
        // ============================================
        const CheckoutSuccessPage = ({ navigate }) => {
            const { clearCart } = useCart();
            const [orderInfo, setOrderInfo] = useState(null);
            const [verifying, setVerifying] = useState(true);

            useEffect(() => {
                const verifyPayment = async () => {
                    try {
                        const pendingOrder = JSON.parse(localStorage.getItem('pendingOrder') || '{}');

                        if (pendingOrder.sessionId) {
                            const response = await fetch(`${ODOO_CONFIG.proxyUrl}/api/checkout/verify-payment`, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    sessionId: pendingOrder.sessionId,
                                    orderRef: pendingOrder.orderRef
                                })
                            });

                            const data = await response.json();

                            if (data.success && data.paymentStatus === 'paid') {
                                setOrderInfo({
                                    orderName: data.orderName || pendingOrder.odooOrderName,
                                    message: data.message
                                });
                                clearCart();
                                localStorage.removeItem('pendingOrder');
                            }
                        }
                    } catch (error) {
                        console.error('Payment verification error:', error);
                    }
                    setVerifying(false);
                };

                verifyPayment();
            }, [clearCart]);

            if (verifying) {
                return (
                    <div className="page active">
                        <section className="py-20">
                            <div className="max-w-lg mx-auto px-6 text-center">
                                <div className="w-20 h-20 bg-bella-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-10 h-10 text-gold animate-spin" fill="none" viewBox="0 0 24 24">
                                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                </div>
                                <h1 className="font-display text-2xl font-bold text-navy mb-4">Verifying Payment...</h1>
                                <p className="text-bella-600">Please wait while we confirm your payment.</p>
                            </div>
                        </section>
                    </div>
                );
            }

            return (
                <div className="page active">
                    <section className="py-20">
                        <div className="max-w-lg mx-auto px-6 text-center">
                            <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <svg className="w-10 h-10 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                </svg>
                            </div>
                            <h1 className="font-display text-3xl font-bold text-navy mb-4">Payment Successful!</h1>
                            <p className="text-bella-600 mb-2">Thank you for your purchase.</p>
                            {orderInfo?.orderName && (
                                <p className="text-lg font-semibold text-navy mb-6">
                                    Order Number: {orderInfo.orderName}
                                </p>
                            )}
                            <p className="text-bella-500 mb-8">
                                You will receive an order confirmation shortly. Our team will contact you for delivery arrangements.
                            </p>
                            <button
                                onClick={() => navigate('home')}
                                className="bg-gold hover:bg-gold-dark text-white px-8 py-3 rounded-xl font-semibold transition-colors"
                            >
                                Continue Shopping
                            </button>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // CHECKOUT CANCEL PAGE (for return from Thawani)
        // ============================================
        const CheckoutCancelPage = ({ navigate }) => {
            return (
                <div className="page active">
                    <section className="py-20">
                        <div className="max-w-lg mx-auto px-6 text-center">
                            <div className="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <svg className="w-10 h-10 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                </svg>
                            </div>
                            <h1 className="font-display text-3xl font-bold text-navy mb-4">Payment Cancelled</h1>
                            <p className="text-bella-600 mb-8">
                                Your payment was cancelled. Your cart items are still saved.
                            </p>
                            <div className="flex gap-4 justify-center">
                                <button
                                    onClick={() => navigate('checkout')}
                                    className="bg-gold hover:bg-gold-dark text-white px-6 py-3 rounded-xl font-semibold transition-colors"
                                >
                                    Try Again
                                </button>
                                <button
                                    onClick={() => navigate('cart')}
                                    className="border border-bella-200 text-navy px-6 py-3 rounded-xl font-medium hover:bg-bella-50 transition-colors"
                                >
                                    Back to Cart
                                </button>
                            </div>
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // WISHLIST PAGE
        // ============================================
        const WishlistPage = ({ navigate }) => {
            const { wishlist, removeFromWishlist } = useWishlist();
            const { addToCart } = useCart();
            const { countryConfig, formatPrice } = useLocale();

            const moveToCart = (item) => {
                addToCart(item, 1);
                removeFromWishlist(item.id);
            };

            return (
                <div className="page active">
                    <section className="bg-gradient-to-r from-bella-50 via-white to-bella-50 py-12 border-b border-bella-100">
                        <div className="max-w-7xl mx-auto px-6">
                            <div className="flex items-center text-sm text-bella-500 mb-4">
                                <span className="cursor-pointer hover:text-navy" onClick={() => navigate('home')}>Home</span>
                                <span className="mx-2">/</span>
                                <span className="text-navy font-medium">Wishlist</span>
                            </div>
                            <h1 className="font-display text-3xl md:text-4xl font-bold text-navy">Your Wishlist</h1>
                            <p className="text-bella-500 mt-2">{wishlist.length} {wishlist.length === 1 ? 'item' : 'items'} saved for later</p>
                        </div>
                    </section>

                    <section className="py-12">
                        <div className="max-w-7xl mx-auto px-6">
                            {wishlist.length === 0 ? (
                                <div className="text-center py-16">
                                    <div className="w-24 h-24 mx-auto bg-bella-100 rounded-full flex items-center justify-center mb-6">
                                        <svg className="w-12 h-12 text-bella-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1.5} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                        </svg>
                                    </div>
                                    <h2 className="font-display text-2xl font-bold text-navy mb-2">Your wishlist is empty</h2>
                                    <p className="text-bella-600 mb-6">Save items you love by clicking the heart icon.</p>
                                    <button onClick={() => navigate('shop')} className="bg-gold hover:bg-gold-dark text-white px-8 py-3 rounded-xl font-semibold transition-colors">
                                        Explore Products
                                    </button>
                                </div>
                            ) : (
                                <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                    {wishlist.map(item => (
                                        <div key={item.id} className="bg-white rounded-2xl overflow-hidden shadow-sm">
                                            <div className="relative h-56 bg-bella-100">
                                                <img
                                                    src={item.thumbnail || item.image}
                                                    alt={item.name}
                                                    className="w-full h-full object-cover cursor-pointer"
                                                    onClick={() => navigate('product', { slug: item.slug })}
                                                />
                                                <button
                                                    onClick={() => removeFromWishlist(item.id)}
                                                    className="absolute top-3 right-3 w-9 h-9 bg-white rounded-full flex items-center justify-center shadow-md hover:bg-red-50 transition-colors"
                                                >
                                                    <svg className="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 24 24">
                                                        <path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                                    </svg>
                                                </button>
                                            </div>
                                            <div className="p-4">
                                                <p className="text-bella-500 text-xs uppercase tracking-wide">{item.category}</p>
                                                <h3 className="font-display text-lg font-semibold text-navy mt-1 line-clamp-2 cursor-pointer hover:text-gold" onClick={() => navigate('product', { slug: item.slug })}>{item.name}</h3>
                                                <p className="text-xl font-bold text-navy mt-2">{countryConfig.currencySymbol} {formatPrice(item.price)}</p>
                                                <div className="flex gap-2 mt-3">
                                                    <button
                                                        onClick={() => moveToCart(item)}
                                                        className="flex-1 bg-gold hover:bg-gold-dark text-white py-2 rounded-lg text-sm font-medium transition-colors"
                                                    >
                                                        Add to Cart
                                                    </button>
                                                    <button
                                                        onClick={() => removeFromWishlist(item.id)}
                                                        className="px-3 py-2 border border-bella-200 rounded-lg hover:bg-red-50 hover:border-red-200 transition-colors"
                                                    >
                                                        <svg className="w-4 h-4 text-bella-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                        </svg>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </section>
                </div>
            );
        };

        // ============================================
        // FOOTER
        // ============================================
        const Footer = ({ navigate, categories }) => {
            const { t } = useLocale();
            const rootCategories = categories.filter(c => c.parentId === null).slice(0, 5);

            return (
                <footer className="bg-navy-dark text-white pt-16 pb-8">
                    <div className="max-w-7xl mx-auto px-6">
                        <div className="grid md:grid-cols-4 gap-12 mb-12">
                            <div>
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="w-10 h-10 bg-gradient-to-br from-gold to-gold-dark rounded-full flex items-center justify-center">
                                        <span className="text-white font-display font-bold">B</span>
                                    </div>
                                    <div>
                                        <h3 className="font-display text-xl font-bold">BELLA</h3>
                                        <p className="text-xs tracking-wider text-bella-400">BATHWARES</p>
                                    </div>
                                </div>
                                <p className="text-bella-400 text-sm">{t('heroSubtitle')}</p>
                            </div>

                            <div>
                                <h4 className="font-semibold mb-4">{t('quickLinks')}</h4>
                                <ul className="space-y-2 text-bella-400">
                                    {[
                                        { key: 'home', label: t('home') },
                                        { key: 'shop', label: t('shop') },
                                        { key: 'about', label: t('about') },
                                        { key: 'contact', label: t('contact') }
                                    ].map(link => (
                                        <li key={link.key}>
                                            <button onClick={() => navigate(link.key)} className="hover:text-gold-light transition-colors">{link.label}</button>
                                        </li>
                                    ))}
                                </ul>
                            </div>

                            <div>
                                <h4 className="font-semibold mb-4">{t('categories')}</h4>
                                <ul className="space-y-2 text-bella-400">
                                    {rootCategories.map(cat => (
                                        <li key={cat.id}>
                                            <button onClick={() => navigate('shop', { categoryId: cat.id })} className="hover:text-gold-light transition-colors">{cat.name}</button>
                                        </li>
                                    ))}
                                </ul>
                            </div>

                            <div>
                                <h4 className="font-semibold mb-4">{t('stayConnected')}</h4>
                                <div className="flex gap-4">
                                    {['F', 'I', 'Y'].map((letter, i) => (
                                        <a key={i} href="#" className="w-10 h-10 bg-navy-light rounded-full flex items-center justify-center hover:bg-gold transition-colors">{letter}</a>
                                    ))}
                                </div>
                            </div>
                        </div>

                        <div className="border-t border-navy-light pt-8 text-center text-bella-500 text-sm">
                            <p>Â© 2024 Bella Bathwares. {t('allRightsReserved')}.</p>
                        </div>
                    </div>
                </footer>
            );
        };

        // ============================================
        // MAIN APP
        // ============================================
        const App = () => {
            const { route, navigate } = useRouter();
            const [categories, setCategories] = useState([]);
            const [categoriesLoading, setCategoriesLoading] = useState(true);

            useEffect(() => {
                const loadCategories = async () => {
                    setCategoriesLoading(true);
                    const data = await OdooAPI.fetchPublicCategories();
                    setCategories(data);
                    setCategoriesLoading(false);
                };
                loadCategories();
            }, []);

            useEffect(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, [route.page, route.params.slug, route.params.category]);

            const selectedCategoryId = route.params.category ? parseInt(route.params.category) : null;

            return (
                <div className="min-h-screen bg-bella-50">
                    <Navigation navigate={navigate} categories={categories} />

                    {route.page === 'home' && <HomePage navigate={navigate} categories={categories} />}

                    {route.page === 'shop' && (
                        <ShopPage
                            navigate={navigate}
                            categories={categories}
                            selectedCategoryId={selectedCategoryId}
                            initialSearch={route.params.search || ''}
                        />
                    )}

                    {route.page === 'product' && (
                        <ProductDetailPage
                            productSlug={route.params.slug}
                            navigate={navigate}
                            categories={categories}
                        />
                    )}

                    {route.page === 'category' && (
                        <CategoryLandingPage
                            categoryId={route.params.categoryId}
                            navigate={navigate}
                            categories={categories}
                        />
                    )}

                    {route.page === 'cart' && <CartPage navigate={navigate} />}
                    {route.page === 'checkout' && <CheckoutPage navigate={navigate} />}
                    {route.page === 'checkout-success' && <CheckoutSuccessPage navigate={navigate} />}
                    {route.page === 'checkout-cancel' && <CheckoutCancelPage navigate={navigate} />}
                    {route.page === 'wishlist' && <WishlistPage navigate={navigate} />}

                    {route.page === 'about' && <AboutPage navigate={navigate} />}
                    {route.page === 'contact' && <ContactPage navigate={navigate} />}

                    <Footer navigate={navigate} categories={categories} />
                </div>
            );
        };

        // Wrap App with providers
        const AppWithProviders = () => (
            <ThemeProvider>
                <LocaleProvider>
                    <CartProvider>
                        <WishlistProvider>
                            <App />
                        </WishlistProvider>
                    </CartProvider>
                </LocaleProvider>
            </ThemeProvider>
        );

        ReactDOM.createRoot(document.getElementById('app')).render(<AppWithProviders />);
    </script>
</body>
</html>
